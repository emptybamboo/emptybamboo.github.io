(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{432:function(t,s,a){"use strict";a.r(s);var n=a(65),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"完整部署前后端项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#完整部署前后端项目"}},[t._v("#")]),t._v(" 完整部署前后端项目")]),t._v(" "),a("h2",{attrs:{id:"部署redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署redis"}},[t._v("#")]),t._v(" 部署Redis")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("首先在正式服务器上拉取docker的redis镜像,这时候要特别注意,因为要使用配置文件配置redis,所以需要到redis官网查看目前的稳定版本redis是多少,或者有一个常用的版本,然后使用"),a("code",[t._v("docker pull redis:版本号")]),t._v("拉取下来")])]),t._v(" "),a("li",[a("p",[t._v("取到"),a("a",{attrs:{href:"http://www.redis.cn/download.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("这个网址"),a("OutboundLink")],1),t._v("下载对应版本的redis,取出redis.conf配置文件")])]),t._v(" "),a("li",[a("p",[t._v("在服务器上放置配置文件,一般是在data文件夹下创建对应文件夹,然后在这个文件夹下再创建data文件夹用以映射持久化的redis数据")]),t._v(" "),a("blockquote",[a("p",[t._v("比如我测试的时候是把配置文件放在了"),a("code",[t._v("/data/redis/test/redis.conf")]),t._v("路径下,然后又创建了"),a("code",[t._v("/data/redis/test/data/")]),t._v("路径放持久化redis数据")])])]),t._v(" "),a("li",[a("p",[t._v("这时候把配置文件修改一下,一定要注意,"),a("strong",[t._v("配置后面不能带空格也不能有下方的中文注释")]),t._v(",注释只是记笔记用的")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("bind")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),t._v(".0.0 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#改成0.0.0.0，使redis可以外部访问")]),t._v("\n\ndaemonize no   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#用守护线程的方式启动")]),t._v("\n\nrequirepass 你的密码   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#给redis设置密码")]),t._v("\n\nappendonly "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("yes")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#redis持久化　　默认是no")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("然后使用命令创建容器并启动")])]),t._v(" "),a("li",[a("p",[a("code",[t._v("docker run -p 6380:6379 --name redis-lzc-test -v /data/redis/test/redis.conf:/etc/redis/redis.conf -v /data/redis/test/data:/data -itd redis:6.0.6 redis-server /etc/redis/redis.conf --appendonly yes")])])])]),t._v(" "),a("blockquote",[a("p",[a("code",[t._v("-p 6380:6379")]),t._v(":把容器内的6379端口映射到"),a("a",{attrs:{href:"https://cloud.tencent.com/product/cdh?from=10680",target:"_blank",rel:"noopener noreferrer"}},[t._v("宿主机"),a("OutboundLink")],1),t._v("6380端口\n"),a("code",[t._v("-v /data/redis/test/redis.conf:/etc/redis/redis.conf")]),t._v("：把宿主机配置好的redis.conf放到容器内的这个位置中\n"),a("code",[t._v("-v /data/redis/test/data:/data")]),t._v("：把redis持久化的数据在宿主机内显示，做数据备份\n"),a("code",[t._v("redis-server /etc/redis/redis.conf")]),t._v("：这个是关键配置，让redis不是无配置启动，而是按照这个redis.conf的配置启动\n"),a("code",[t._v("–appendonly yes")]),t._v("：redis启动后数据持久化")])]),t._v(" "),a("ul",[a("li",[t._v("这时候一般就可以了,要注意服务器开没"),a("strong",[t._v("开放redis对应的端口号")])])]),t._v(" "),a("h2",{attrs:{id:"部署后端项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署后端项目"}},[t._v("#")]),t._v(" 部署后端项目")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("首先创建Dockerfile,挂载目录出来以方便替换jar包重启项目,这样写固定要放入的jar包名字为app.jar")]),t._v(" "),a("div",{staticClass:"language-dockerfile extra-class"},[a("pre",{pre:!0,attrs:{class:"language-dockerfile"}},[a("code",[a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("FROM")]),t._v(" openjdk:11-jre-slim-buster")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# VOLUME 指定了临时文件目录为/tmp。其效果是在主机 /var/lib/docker 目录下创建了一个临时文件，并链接到容器的/tmp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#VOLUME /tmp")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#COPY financial-leasing-manage-0.0.1-SNAPSHOT.jar app.jar")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v('#ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","/app.jar"]')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#以上三句本来是Dockerfile的普通用法,现在我要改为挂载目录替换jar包方法,所以注释掉加上下面这句")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#本来/data后面应该是真实jar包名,但是因为涉及到版本更新的问题,jar包名字可能会变,所以在这里写死名字,打包之后改名放入服务器就万无一失了")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#为了保证容器时区和系统时区相同，需要挂载docker的/etc/localtime到系统的/etc/localtime。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" /bin/cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#JVM是通过/etc/timezone文件获取时区的，需要在容器中映射或者写入时区文件。")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("RUN")]),t._v(" echo "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Asia/Shanghai"')]),t._v(" > /etc/timezone")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token instruction"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ENTRYPOINT")]),t._v(" ["),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"java"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-Djava.security.egd=file:/dev/./urandom"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-jar"')]),t._v(","),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/data/app.jar"')]),t._v("]")]),t._v("\n")])])])]),t._v(" "),a("li",[a("p",[t._v("打包好jar包,注意修改yml里的active为正式环境配置,其他需要修改的比如一些证书文件绝对地址,正式环境的第三方接口请求地址之类的也一定要记得修改")])]),t._v(" "),a("li",[a("p",[t._v("申请域名,根据域名申请SSL证书,把SSL证书放置在服务器上,比如我放在了"),a("code",[t._v("/root/nginx-cert/financial-leasing-manage-prod/suxiang")])])]),t._v(" "),a("li",[a("p",[t._v("然后记得如果第三方接口需要安全证书秘钥之类的也放在服务器上,比如我放在了"),a("code",[t._v("/root/technologyDepartment/projects/financial-leasing/cert/authentication/official/")]),t._v("和"),a("code",[t._v("/root/technologyDepartment/projects/financial-leasing/cert/sign/official/")])])]),t._v(" "),a("li",[a("p",[t._v("使用docker命令创建后端项目容器并运行,挂载jar包到外部服务器目录")]),t._v(" "),a("ul",[a("li",[t._v("首先创建项目镜像,把jar包和Dockerfile放入我们想要挂载到docker内部的目录,使用linux命令进入jar包存放目录,运行"),a("code",[t._v("docker build -f Dockerfile -t 镜像名 .")])])]),t._v(" "),a("blockquote",[a("p",[t._v("这里我部署到正式服的命令为"),a("code",[t._v("docker build -f Dockerfile -t financial-leasing-manage-prod .")])])]),t._v(" "),a("ul",[a("li",[t._v("然后使用命令创建并启动容器,挂载jar包目录:"),a("code",[t._v("docker run --name financial-manage -itd -v 服务器jar包存放目录:/data -v 服务器证书存放目录:/data/cert -p 8012:8082 镜像名")])])]),t._v(" "),a("blockquote",[a("p",[t._v("这里我部署到正式服的命令为"),a("code",[t._v("docker run --name financial-manage-prod -itd -v /root/technologyDepartment/projects/financial-leasing/manage/prod-package:/data -v /root/technologyDepartment/projects/financial-leasing/cert:/data/cert -p 8015:8082 financial-leasing-manage-prod")])])])]),t._v(" "),a("li",[a("p",[t._v("此时后端项目就算是部署成功")])]),t._v(" "),a("li",[a("p",[t._v("后端项目中所有需要修改配置的地方都去修改好,比如安全证书测试环境和正式环境是不同的")])])]),t._v(" "),a("h2",{attrs:{id:"部署前端项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署前端项目"}},[t._v("#")]),t._v(" 部署前端项目")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("据询问大佬,只需要拿着之前的前端项目打包好的文件,放入新的目录,目录由自己创建,当然是要在nginx里面的目录")]),t._v(" "),a("blockquote",[a("p",[t._v("我把前端打包文件放在了"),a("code",[t._v("/usr/local/nginx/html/rzzl-prod/manage/")])])])]),t._v(" "),a("li",[a("p",[t._v("然后去nginx中配置好新的项目信息,前端的目录地址,后端的地址和端口号,https域名以及SSL证书即可")])])]),t._v(" "),a("blockquote",[a("p",[t._v("域名暂时用的速享"),a("code",[t._v("https://e-sign.suxiangkj.com/")])])]),t._v(" "),a("ul",[a("li",[t._v("然后linux使用命令行输入"),a("code",[t._v("nginx目录 nginx -t")]),t._v(",在输入"),a("code",[t._v("nginx -s reload")]),t._v(",无异常即可运行")])]),t._v(" "),a("blockquote",[a("p",[t._v("比如"),a("code",[t._v("/usr/local/nginx/sbin/nginx -t")]),t._v(","),a("code",[t._v("/usr/local/nginx/sbin/nginx -s reload")])])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("nginx配置")]),t._v(" "),a("div",{staticClass:"language-nginx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-nginx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("####################################融资租赁后端正式项目配置#######################################  ")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("80")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v(" e-sign.suxiangkj.com")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#需要将yourdomain.com替换成证书绑定的域名。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v(" ^(.*)$ https://"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$host")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#将所有HTTP请求通过rewrite指令重定向到HTTPS。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" index.html index.htm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" @router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v(" ^.*$ /index.html last")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("listen")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("443")]),t._v(" ssl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("server_name")]),t._v("  e-sign.suxiangkj.com")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v(" html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" index.html index.htm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ssl_certificate")]),t._v(" /root/nginx-cert/financial-leasing-manage-prod/suxiang/7766933_e-sign.suxiangkj.com.pem")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ssl_certificate_key")]),t._v(" /root/nginx-cert/financial-leasing-manage-prod/suxiang/7766933_e-sign.suxiangkj.com.key")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ssl_session_timeout")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5m")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ssl_ciphers")]),t._v(" ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#表示使用的加密套件的类型。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ssl_protocols")]),t._v(" TLSv1.1 TLSv1.2 TLSv1.3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#表示使用的TLS协议的类型。")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ssl_prefer_server_ciphers")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_buffering")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("on")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_buffer_size")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024k")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_buffers")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1024k")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_busy_buffers_size")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048k")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_temp_file_write_size")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2048k")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("root")]),t._v(" /usr/local/nginx/html/rzzl-prod/manage/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#站点目录。")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" index.html index.htm")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try_files")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$uri")]),t._v("/ @router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v(" ^/(datasta)/(.+)$ /"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("$1")]),t._v("/ last")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /manage/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("proxy_pass")]),t._v(" http://47.108.176.203:8015")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" /xyzl/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("alias")]),t._v(" /usr/local/nginx/html/rzzl-prod/manage/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("index")]),t._v(" index.html")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("location")]),t._v(" @router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token directive"}},[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("rewrite")]),t._v(" ^.*$ /index.html last")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),a("h2",{attrs:{id:"部署一整套软件-中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#部署一整套软件-中间件"}},[t._v("#")]),t._v(" 部署一整套软件/中间件")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("一个docker-compose部署mysql,redis,nginx的docker-compose.yml文件")]),t._v(" "),a("div",{staticClass:"language-yml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# yaml 配置实例")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'3.7'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("services")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("mysql8.0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 镜像名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("8.0.21\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 容器名(以后的控制都通过这个)")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql8.0\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启策略")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("cap_add")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" SYS_NICE "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 添加到SYS NICE,试着解决容器日志报的mbind: Operation not permitted")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 时区上海")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TZ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Asia/Shanghai\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# root 密码")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_ROOT_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" shineray9527\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 初始化用户(不能是root 会报错, 后续需要给新用户赋予权限)")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_USER")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" shineray\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 用户密码")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("MYSQL_PASSWORD")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" shineray9527\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 映射端口")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"3310:3306"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据挂载")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/mysql8.0/data/"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/lib/mysql/\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置挂载")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/mysql8.0/conf/my.cnf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/mysql/my.cnf\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 日志挂载")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/mysql8.0/logs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/logs\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将mysql8.0默认密码策略 修改为 原先 策略 (mysql8.0对其默认策略做了更改 会导致密码无法匹配)")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("default"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("authentication"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("plugin=mysql_native_password\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("character"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("set"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server=utf8mb4\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("collation"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("server=utf8mb4_general_ci\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("explicit_defaults_for_timestamp=true\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("lower_case_table_names=1\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redis6.0-test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 镜像名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("6.2.6\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 容器名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis6.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("test\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启策略")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 权限")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("privileged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 端口映射")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6388:6379"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一定不要把服务器的6379作为redis的端口号还不设置密码,这样会导致别人黑进来")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置环境变量 时区上海 编码UTF-8")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TZ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Asia/Shanghai\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LANG")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" en_US.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('c "apt'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y procps "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" sysctl vm.overcommit_memory=1 "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('server /redis.conf"\n    '),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置文件")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/redis6.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("test/conf/redis.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/redis.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("rw\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据文件")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/redis6.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("test/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("rw\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("redis6.0-prd")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 镜像名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("6.2.6\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 容器名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" redis6.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prd\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启策略")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 权限")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("privileged")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 端口映射")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"6389:6379"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 一定不要把服务器的6379作为redis的端口号还不设置密码,这样会导致别人黑进来")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 设置环境变量 时区上海 编码UTF-8")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("TZ")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Asia/Shanghai\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("LANG")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" en_US.UTF"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" sh "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('c "apt'),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get update "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" apt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("get install "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("y procps "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" sysctl vm.overcommit_memory=1 "),a("span",{pre:!0,attrs:{class:"token important"}},[t._v("&&")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('server /redis.conf"\n    '),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 配置文件")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/redis6.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prd/conf/redis.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/redis.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("rw\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 数据文件")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/redis6.0"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prd/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("rw\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("my-nginx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("image")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("1.23.4 "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 自定义镜像名:tag名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("container_name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("nginx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("test "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 容器名")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("environment")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" TZ=Asia/Shanghai\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("ports")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"80:80"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"443:443"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("restart")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("volumes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/nginx/html"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/usr/share/nginx/html "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只映射一个文件夹进去,然后如果要部署多个项目就在这个文件夹下新建多个文件夹来分装")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/nginx/conf/nginx.conf"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/nginx/nginx.conf\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/nginx/conf.d"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/nginx/conf.d\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/nginx/logs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/var/log/nginx\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" /root/software/nginx/cert"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("/etc/nginx/cert "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 存放ssl证书的位置")]),t._v("\n\n\n")])])])])])])}),[],!1,null,null,null);s.default=e.exports}}]);