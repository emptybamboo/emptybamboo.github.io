<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>下拉选择 | 学而时习之</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/img/qiyu.jpg">
    <meta name="description" content="个人学习博客">
    
    <link rel="preload" href="/assets/css/0.styles.e4d8b86b.css" as="style"><link rel="preload" href="/assets/js/app.6ef7aeda.js" as="script"><link rel="preload" href="/assets/js/2.716a1f37.js" as="script"><link rel="preload" href="/assets/js/90.e91320ce.js" as="script"><link rel="prefetch" href="/assets/js/10.a4a050d1.js"><link rel="prefetch" href="/assets/js/11.344787d3.js"><link rel="prefetch" href="/assets/js/12.b25f9ccf.js"><link rel="prefetch" href="/assets/js/13.fbdea543.js"><link rel="prefetch" href="/assets/js/14.5fc0584b.js"><link rel="prefetch" href="/assets/js/15.688b7501.js"><link rel="prefetch" href="/assets/js/16.fbd251ee.js"><link rel="prefetch" href="/assets/js/17.6b6b044b.js"><link rel="prefetch" href="/assets/js/18.4da62780.js"><link rel="prefetch" href="/assets/js/19.e76bd09c.js"><link rel="prefetch" href="/assets/js/20.c6c4fad3.js"><link rel="prefetch" href="/assets/js/21.76180caa.js"><link rel="prefetch" href="/assets/js/22.6f1b73fd.js"><link rel="prefetch" href="/assets/js/23.a95962c2.js"><link rel="prefetch" href="/assets/js/24.eee43d5e.js"><link rel="prefetch" href="/assets/js/25.56e05948.js"><link rel="prefetch" href="/assets/js/26.43f2e3ff.js"><link rel="prefetch" href="/assets/js/27.09054ea0.js"><link rel="prefetch" href="/assets/js/28.c4e54eaa.js"><link rel="prefetch" href="/assets/js/29.06c6b4e5.js"><link rel="prefetch" href="/assets/js/3.eaf135e1.js"><link rel="prefetch" href="/assets/js/30.250c7c81.js"><link rel="prefetch" href="/assets/js/31.91b37571.js"><link rel="prefetch" href="/assets/js/32.d2677ff0.js"><link rel="prefetch" href="/assets/js/33.41ead764.js"><link rel="prefetch" href="/assets/js/34.133f8e54.js"><link rel="prefetch" href="/assets/js/35.362db0cb.js"><link rel="prefetch" href="/assets/js/36.db01e9cc.js"><link rel="prefetch" href="/assets/js/37.78fd90d2.js"><link rel="prefetch" href="/assets/js/38.27112b1c.js"><link rel="prefetch" href="/assets/js/39.c077219c.js"><link rel="prefetch" href="/assets/js/4.75ddad43.js"><link rel="prefetch" href="/assets/js/40.c9153258.js"><link rel="prefetch" href="/assets/js/41.c0b0dba4.js"><link rel="prefetch" href="/assets/js/42.787b0675.js"><link rel="prefetch" href="/assets/js/43.35499284.js"><link rel="prefetch" href="/assets/js/44.ea23a009.js"><link rel="prefetch" href="/assets/js/45.e5cd72c6.js"><link rel="prefetch" href="/assets/js/46.f1392760.js"><link rel="prefetch" href="/assets/js/47.1553f24b.js"><link rel="prefetch" href="/assets/js/48.c696d608.js"><link rel="prefetch" href="/assets/js/49.a7940cc9.js"><link rel="prefetch" href="/assets/js/5.f9f3c101.js"><link rel="prefetch" href="/assets/js/50.e8cadfe4.js"><link rel="prefetch" href="/assets/js/51.080e63aa.js"><link rel="prefetch" href="/assets/js/52.7347d36c.js"><link rel="prefetch" href="/assets/js/53.aba50764.js"><link rel="prefetch" href="/assets/js/54.ca1160dc.js"><link rel="prefetch" href="/assets/js/55.b6574861.js"><link rel="prefetch" href="/assets/js/56.be3c310f.js"><link rel="prefetch" href="/assets/js/57.037820ea.js"><link rel="prefetch" href="/assets/js/58.24474c32.js"><link rel="prefetch" href="/assets/js/59.3b585e3d.js"><link rel="prefetch" href="/assets/js/6.c86d08c0.js"><link rel="prefetch" href="/assets/js/60.75b5bae2.js"><link rel="prefetch" href="/assets/js/61.1831f564.js"><link rel="prefetch" href="/assets/js/62.18a1b459.js"><link rel="prefetch" href="/assets/js/63.346f7f49.js"><link rel="prefetch" href="/assets/js/64.a7683029.js"><link rel="prefetch" href="/assets/js/65.1a938596.js"><link rel="prefetch" href="/assets/js/66.0106ad50.js"><link rel="prefetch" href="/assets/js/67.b0b943da.js"><link rel="prefetch" href="/assets/js/68.60534009.js"><link rel="prefetch" href="/assets/js/69.72e1bfa9.js"><link rel="prefetch" href="/assets/js/7.e0e4b61b.js"><link rel="prefetch" href="/assets/js/70.3a29dfd9.js"><link rel="prefetch" href="/assets/js/71.3e57d5ec.js"><link rel="prefetch" href="/assets/js/72.be56e12f.js"><link rel="prefetch" href="/assets/js/73.b6934116.js"><link rel="prefetch" href="/assets/js/74.81f5b5c3.js"><link rel="prefetch" href="/assets/js/75.e9dacdaf.js"><link rel="prefetch" href="/assets/js/76.7c0855f1.js"><link rel="prefetch" href="/assets/js/77.98a4a794.js"><link rel="prefetch" href="/assets/js/78.3049e29b.js"><link rel="prefetch" href="/assets/js/79.9c741fac.js"><link rel="prefetch" href="/assets/js/8.8c856480.js"><link rel="prefetch" href="/assets/js/80.46cc42c2.js"><link rel="prefetch" href="/assets/js/81.2647d9b6.js"><link rel="prefetch" href="/assets/js/82.0c7a9946.js"><link rel="prefetch" href="/assets/js/83.fa03835c.js"><link rel="prefetch" href="/assets/js/84.909232bc.js"><link rel="prefetch" href="/assets/js/85.7cf12395.js"><link rel="prefetch" href="/assets/js/86.805e61d2.js"><link rel="prefetch" href="/assets/js/87.5ec873ab.js"><link rel="prefetch" href="/assets/js/88.54c3c15b.js"><link rel="prefetch" href="/assets/js/89.286a5312.js"><link rel="prefetch" href="/assets/js/9.6133e2ec.js"><link rel="prefetch" href="/assets/js/91.932f1454.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e4d8b86b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学而时习之</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuePress/" class="nav-link">
  博客相关知识
</a></li><li class="dropdown-item"><!----> <a href="/javaBasics/" class="nav-link">
  JavaSE基础知识
</a></li><li class="dropdown-item"><!----> <a href="/javaFramework/" class="nav-link">
  Java框架知识
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/js/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/sql/" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/projectPractice/" class="nav-link">
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/projectNote/" class="nav-link">
  工作项目积累
</a></li><li class="dropdown-item"><!----> <a href="/faultNote/" class="nav-link">
  记错本
</a></li><li class="dropdown-item"><!----> <a href="/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux学习
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git笔记
</a></li><li class="dropdown-item"><!----> <a href="/middleware/" class="nav-link">
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link">
  docker笔记
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx笔记
</a></li><li class="dropdown-item"><!----> <a href="/systemArchitecture/" class="nav-link">
  系统架构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具网站" class="dropdown-title"><span class="title">工具网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具网站" class="mobile-dropdown-title"><span class="title">工具网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://postimages.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postimages图床
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="博文" class="dropdown-title"><span class="title">博文</span> <span class="arrow down"></span></button> <button type="button" aria-label="博文" class="mobile-dropdown-title"><span class="title">博文</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vuePress/" class="nav-link">
  博客相关知识
</a></li><li class="dropdown-item"><!----> <a href="/javaBasics/" class="nav-link">
  JavaSE基础知识
</a></li><li class="dropdown-item"><!----> <a href="/javaFramework/" class="nav-link">
  Java框架知识
</a></li><li class="dropdown-item"><!----> <a href="/book/" class="nav-link">
  技术书籍
</a></li><li class="dropdown-item"><!----> <a href="/js/" class="nav-link">
  前端
</a></li><li class="dropdown-item"><!----> <a href="/sql/" class="nav-link">
  数据库知识
</a></li><li class="dropdown-item"><!----> <a href="/projectPractice/" class="nav-link">
  项目实战
</a></li><li class="dropdown-item"><!----> <a href="/projectNote/" class="nav-link">
  工作项目积累
</a></li><li class="dropdown-item"><!----> <a href="/faultNote/" class="nav-link">
  记错本
</a></li><li class="dropdown-item"><!----> <a href="/php/" class="nav-link">
  php
</a></li><li class="dropdown-item"><!----> <a href="/linux/" class="nav-link">
  linux学习
</a></li><li class="dropdown-item"><!----> <a href="/git/" class="nav-link">
  git笔记
</a></li><li class="dropdown-item"><!----> <a href="/middleware/" class="nav-link">
  中间件
</a></li><li class="dropdown-item"><!----> <a href="/docker/" class="nav-link">
  docker笔记
</a></li><li class="dropdown-item"><!----> <a href="/nginx/" class="nav-link">
  nginx笔记
</a></li><li class="dropdown-item"><!----> <a href="/systemArchitecture/" class="nav-link">
  系统架构
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="工具网站" class="dropdown-title"><span class="title">工具网站</span> <span class="arrow down"></span></button> <button type="button" aria-label="工具网站" class="mobile-dropdown-title"><span class="title">工具网站</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://postimages.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  postimages图床
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>公司框架使用</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yumu/公司框架/新框架.html" class="sidebar-link">新框架</a></li><li><a href="/yumu/公司框架/老框架.html" class="sidebar-link">老框架</a></li><li><a href="/yumu/公司框架/2020开年新框架.html" class="sidebar-link">2020框架</a></li><li><a href="/yumu/公司框架/框架通用.html" class="active sidebar-link">框架通用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#下拉选择" class="sidebar-link">下拉选择</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#二级联动" class="sidebar-link">二级联动</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#搜索" class="sidebar-link">搜索</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#json数组关联它表删除" class="sidebar-link">JSON数组关联它表删除</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#css" class="sidebar-link">CSS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#覆盖css" class="sidebar-link">覆盖CSS</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#行级样式" class="sidebar-link">行级样式</a></li></ul></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#双击表格进入编辑页面" class="sidebar-link">双击表格进入编辑页面</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#双击标签关闭页面" class="sidebar-link">双击标签关闭页面</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#in查询-不建议使用" class="sidebar-link">in查询(不建议使用)</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#框架自带图片上传方法photo" class="sidebar-link">框架自带图片上传方法photo</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#区域联动" class="sidebar-link">区域联动</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#时间选择框" class="sidebar-link">时间选择框</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#输入框" class="sidebar-link">输入框</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#时间计算" class="sidebar-link">时间计算</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#月份差额" class="sidebar-link">月份差额</a></li></ul></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#时间比较与计算" class="sidebar-link">时间比较与计算</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#事务" class="sidebar-link">事务</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#api接口" class="sidebar-link">API接口</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#点击按钮切换表格显示类别" class="sidebar-link">点击按钮切换表格显示类别</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#挑选限定时间活动中时间最合适的那个" class="sidebar-link">挑选限定时间活动中时间最合适的那个</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#二维码" class="sidebar-link">二维码</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#微信" class="sidebar-link">微信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#收付款" class="sidebar-link">收付款</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#获取id" class="sidebar-link">获取ID</a></li></ul></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#sql语句" class="sidebar-link">SQL语句</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#比较判断" class="sidebar-link">比较判断</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#流程" class="sidebar-link">流程</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#数据回显" class="sidebar-link">数据回显</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#正则表达式" class="sidebar-link">正则表达式</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#js" class="sidebar-link">JS</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#动态变动layer长度" class="sidebar-link">动态变动Layer长度</a></li></ul></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#弹出层" class="sidebar-link">弹出层</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#参数" class="sidebar-link">参数</a></li></ul></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#html5" class="sidebar-link">HTML5</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#模糊查询输入框" class="sidebar-link">模糊查询输入框</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#单选" class="sidebar-link">单选</a></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#h5输入框校检" class="sidebar-link">H5输入框校检</a></li></ul></li><li class="sidebar-sub-header"><a href="/yumu/公司框架/框架通用.html#office" class="sidebar-link">OFFICE</a></li></ul></li><li><a href="/yumu/公司框架/js相关.html" class="sidebar-link">js相关</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="下拉选择"><a href="#下拉选择" class="header-anchor">#</a> 下拉选择</h2> <ul><li><p>如果想直接用数据库的数据做成一个下拉框用作搜索或者更新,就不能去para数据表里写死,就需要使用<code>idSelect</code>方法.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">idSelect</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;sqlForm&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;userlevel order by id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlId&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;levelName&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlField&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;levelName&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;levelId&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;会员等级&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">.</span>

 <span class="token comment">//这样的写法就可以用作搜索框,但是其实可以被取代.</span>
    
    
    
  must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;会员卡等级：&quot;</span> <span class="token operator">=&gt;</span><span class="token function">idSelect</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;sqlForm&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;userlevel order by id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlId&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;levelName&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlField&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;levelName&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;level&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;会员等级&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span><span class="token operator">=&gt;</span><span class="token variable">$kehu</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'level'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token comment">//这样写就是在详情页新增页新增或编辑数据时的下拉框,如果你要获取的不是id而是文字,就要把sqlId这个键对应的值写为你想要的文字在数据库中的字段名</span>
</code></pre></div></li></ul> <hr> <h2 id="二级联动"><a href="#二级联动" class="header-anchor">#</a> 二级联动</h2> <ul><li><p>如果你想实现二级联动,就需要去<code>extend.js</code>中写方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*******订单管理-订单管理-详情-选择主题***********************************************/</span>
<span class="token keyword">function</span> <span class="token function">selectTheme</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>root <span class="token operator">+</span> <span class="token string">&quot;control/data.php?type=getReserveRound&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">theme</span><span class="token operator">:</span> obj<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;[name='roundId']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>secondSelect<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;订单号：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;orderNumber&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'orderNumber'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;主题：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">idSelect</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;sqlForm&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;theme order by id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlId&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlField&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;themeName&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;themeId&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;主题选择&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;change&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;selectTheme&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'themeId'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">//一级选择绑定js方法</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;预订人：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;userName&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'reservation'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;手机号：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;userTel&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'reservationCall'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;数量：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;number&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'number'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;金额：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;money&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'money'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;消耗次数：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;consumeCount&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'consumeCount'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;预定日期：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;presetTime&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;laydate&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'presetTime'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;预定场次：&quot;</span> <span class="token operator">=&gt;</span>
                    <span class="token function">idSelectTwo</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;sqlForm&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;round where themeId = '<span class="token interpolation"><span class="token variable">$buyCar</span><span class="token punctuation">[</span>themeId<span class="token punctuation">]</span></span>' order by id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlId&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlField&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;startTime&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;endTime&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;roundId&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;预定场次&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$round</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token comment">//二级选择</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;订单状态：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;workFlow&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;选择&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;option&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;待支付&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;待消费&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;已完成&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;退款中&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;已退款&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'workFlow'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/************订单管理-订单管理-详情-选择主题********************************************/</span>
<span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">$get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;getReserveRound&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$theme</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;theme&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id = <span class="token interpolation"><span class="token variable">$post</span><span class="token punctuation">[</span>theme<span class="token punctuation">]</span></span>&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$sqlForm</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot; round where themeId = '<span class="token interpolation"><span class="token variable">$theme</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span></span>' order by id &quot;</span><span class="token punctuation">;</span>
    <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'secondSelect'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">idSelect</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;sqlForm&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$sqlForm</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlId&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;sqlField&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;startTime&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;roundId&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;预定场次&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <ul><li><p>在做<strong>异步二级联动</strong>的时候,如果是直接展示数据或者是联动展示到另外的下拉里,js方法中把异步的值通过html(data.得到的属性).</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*******采购-采购询价表-详情-物料名称二级联动***********************************************/</span>
<span class="token keyword">function</span> <span class="token function">selectMaterial</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>root <span class="token operator">+</span> <span class="token string">&quot;control/addata.php?type=getNumAndUnit&quot;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token literal-property property">product</span><span class="token operator">:</span>obj<span class="token punctuation">.</span>value<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;[name='specification']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>specification<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;[name='unit']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <ul><li>如果是联动显示到二级输入框中,就需要使用val(data.得到的属性).</li></ul> <hr> <h2 id="搜索"><a href="#搜索" class="header-anchor">#</a> 搜索</h2> <ul><li>关于搜索功能的where部分,Class中会拼成一个$where数组,但是这个数组仅仅只是你放进去的查询条件,不包括SQL语句中的where关键字,所以如果要使用,必须在定义的SQL语句结尾先拼接where 1 = 1,然后再拼接$where才可以正常进行搜索查询.</li></ul> <h2 id="json数组关联它表删除"><a href="#json数组关联它表删除" class="header-anchor">#</a> JSON数组关联它表删除</h2> <ul><li><p>连带删除功能代码例子,假如有会员表,还有个标签表,标签以json形式绑定在会员表中的某个字段(一般是JSON格式),现在想删除标签表里的标签的同时把有这个标签的用户的这个标签也一起都删掉.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**********************会员管理-会员标签列表-批量删除*********************************/</span>
<span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">$get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;deleteTag&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$array</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">power</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;adTag&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;del&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;您没有删除标签的权限&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">elseif</span> <span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$array</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;您一个标签都没有选择呢&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token variable">$text</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$array</span> <span class="token keyword">as</span> <span class="token variable">$id</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$tag</span> <span class="token operator">=</span> <span class="token function">sqlQueryAll</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;select * from kehu where tag like '%<span class="token interpolation"><span class="token variable">$id</span></span>%'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查询所有客户信息,然后遍历拿到客户的标签json,把遍历中的每个json转为数组,判断其中有没有我们要删除的标签id,如果有就删掉</span>
<span class="token comment">//            这里的代码完成删除标签时,自动删除所有带这个标签的会员的标签JSON中的这个标签</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$tag</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$tag</span> <span class="token keyword">as</span> <span class="token variable">$tagOne</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token variable">$tagArr</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token variable">$tagOne</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tag'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token variable">$a</span> <span class="token operator">=</span> <span class="token function">array_flip</span><span class="token punctuation">(</span><span class="token variable">$tagArr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token variable">$key</span> <span class="token operator">=</span> <span class="token variable">$a</span><span class="token punctuation">[</span><span class="token variable">$id</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token comment">//这里指定删除数组中值为我们要删除的那个标签的id</span>
                    <span class="token keyword">unset</span><span class="token punctuation">(</span><span class="token variable">$tagArr</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$tagArr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                        <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
                            <span class="token string double-quoted-string">&quot;table&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;kehu&quot;</span><span class="token punctuation">,</span>
                            <span class="token string double-quoted-string">&quot;field&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                                <span class="token string double-quoted-string">&quot;tag&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">//更新标签</span>
                            <span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token string double-quoted-string">&quot;where&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot; khid = '<span class="token interpolation"><span class="token variable">$tagOne</span><span class="token punctuation">[</span>khid<span class="token punctuation">]</span></span>' &quot;</span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                        <span class="token variable">$tagJson</span> <span class="token operator">=</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token function">array_values</span><span class="token punctuation">(</span><span class="token variable">$tagArr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
                            <span class="token string double-quoted-string">&quot;table&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;kehu&quot;</span><span class="token punctuation">,</span>
                            <span class="token string double-quoted-string">&quot;field&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                                <span class="token string double-quoted-string">&quot;tag&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$tagJson</span><span class="token punctuation">,</span><span class="token comment">//更新标签</span>
                            <span class="token punctuation">)</span><span class="token punctuation">,</span>
                            <span class="token string double-quoted-string">&quot;where&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot; khid = '<span class="token interpolation"><span class="token variable">$tagOne</span><span class="token punctuation">[</span>khid<span class="token punctuation">]</span></span>' &quot;</span><span class="token punctuation">,</span>
                        <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>

                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>



            <span class="token variable">$adTag</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;adTag&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot; id = '<span class="token interpolation"><span class="token variable">$id</span></span>' &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//最后删除客户基本参数</span>
            <span class="token function">mysqli_query</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot; delete from adTag where id = '<span class="token interpolation"><span class="token variable">$adTag</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span></span>' &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token function">unlink</span><span class="token punctuation">(</span>serverRoot<span class="token operator">.</span><span class="token variable">$adTag</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'imgUrl'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token comment">//返回</span>
            <span class="token variable">$warn</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;删除成功&quot;</span><span class="token punctuation">;</span>
            <span class="token variable">$x</span><span class="token operator">++</span><span class="token punctuation">;</span>
<span class="token comment">//            }</span>
            <span class="token variable">$text</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;会员标签【&quot;</span> <span class="token operator">.</span> <span class="token variable">$adTag</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tagName'</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;】，会员标签ID【&quot;</span> <span class="token operator">.</span> <span class="token variable">$adTag</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;】&quot;</span> <span class="token operator">.</span> <span class="token variable">$warn</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;。&lt;br&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//添加日志</span>
        <span class="token variable">$text</span> <span class="token operator">=</span> <span class="token variable">$control</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adName'</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;批量删除了会员积分等级，结果如下：&lt;br&gt;&quot;</span> <span class="token operator">.</span> <span class="token variable">$text</span><span class="token punctuation">;</span>
        <span class="token function">logText</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;adTag&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;text&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$text</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//返回</span>
        <span class="token variable">$_SESSION</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;删除了&quot;</span> <span class="token operator">.</span> <span class="token variable">$x</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;个标签，详情见系统日志。&quot;</span><span class="token punctuation">;</span>
        <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="css"><a href="#css" class="header-anchor">#</a> CSS</h2> <h3 id="覆盖css"><a href="#覆盖css" class="header-anchor">#</a> 覆盖CSS</h3> <ul><li><p>如果你想要强行覆盖一些css样式,就需要往这段页面中插入css片段去覆盖,如以下代码</p> <div class="language-css extra-class"><pre class="language-css"><code>$html = $edit.space.&quot;&lt;style&gt;.tableMany <span class="token selector">td</span><span class="token punctuation">{</span><span class="token property">background-color</span><span class="token punctuation">:</span> white<span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">}</span><span class="token selector">.tableMany tr:hover</span> <span class="token punctuation">{</span><span class="token property">color</span><span class="token punctuation">:</span> #555<span class="token important">!important</span><span class="token punctuation">;</span><span class="token punctuation">}</span>&lt;/style&gt;<span class="token string">&quot;.tableMany(array(&quot;</span>tr<span class="token string">&quot; =&gt; $tr)).&quot;</span>&lt;input name=<span class="token string">'themeId'</span> style=<span class="token string">'display: none'</span> value=<span class="token string">'$themeId'</span> /&gt;&quot;<span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>如果你想改变弹出层其中的CSS样式,你首先要去浏览器F12中找到对应样式.</p></li> <li><p>然后复制下来,修改其中你要修改的部分,</p></li> <li><p>之后在Class中的Layer相关函数中,写好这部分样式</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'css'</span><span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token string single-quoted-string">'.tableRight tr&gt;:first-child {
        min-width: 0px;!important
        }'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>这里我选择返回的是<code>$result['css']</code>,其实括号里的名字可以自定义.</p></li> <li><p>然后去<code>layer.php</code>修改对应部分的代码,到使用到类的那部分代码里接收这个css</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'css'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;&lt;style&gt;
            &quot;</span><span class="token operator">.</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'css'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;
            &lt;/style&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">$key</span> <span class="token operator">=</span> <span class="token function">arrayTwoValue</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">typeClass</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>


    <span class="token keyword">require_once</span><span class="token punctuation">(</span>serverRoot<span class="token operator">.</span><span class="token string double-quoted-string">&quot;class/&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;.php&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$class</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token variable">$key</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


    <span class="token variable">$fun</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;Layer&quot;</span><span class="token punctuation">;</span>

    <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token variable">$class</span><span class="token operator">-&gt;</span><span class="token variable">$fun</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;post&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$post</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;control&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'control'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">frame</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;height&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'height'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;width&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'width'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">tableList</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'auditingFollow'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;&lt;div class='recordDiv'&gt;&lt;p class='center'&gt;审核记录&lt;/p&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">auditingFollow</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'auditingFollow'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/div&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'table'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hidden'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$hidden</span> <span class="token operator">=</span> <span class="token variable">$idInput</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token variable">$hidden</span> <span class="token operator">=</span> <span class="token variable">$idInput</span><span class="token operator">.</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hidden'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token operator">!=</span><span class="token string single-quoted-string">'adUserExport'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'formTwo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                    <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">button</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;formTwo&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'formTwo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//判断如果action不为空,就把button按钮替换为一个普通的submit按钮</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'action'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;input type=\&quot;submit\&quot; value=\&quot;提交\&quot; class='spanButton'/&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'table'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token variable">$hidden</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">table</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'table'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'tables'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'action'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'html'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">//增加如果想传css样式就这样传</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'css'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;&lt;style&gt;
            &quot;</span><span class="token operator">.</span><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'css'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;
            &lt;/style&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
    <span class="token variable">$html</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;未知弹出层执行指令&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//返回信息</span>
<span class="token keyword">return</span> <span class="token variable">$html</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>这样就可以了,不过还有点问题,就是如果想要强制覆盖样式,一定要加<code>!important</code>,但是要注意是给具体样式加,不是给类选择器加.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'css'</span><span class="token punctuation">]</span> <span class="token operator">=</span> 
        <span class="token string single-quoted-string">'.tableRight tr&gt;:first-child {
        min-width: 0px;!important//是加在这里的
        }'</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>同时呢还有一个问题,就是你加了<code>!important</code>之后也可能会出现点击弹出层内容不起作用的问题,打开F12发现相关样式前有一个黄色感叹号,说<code>unknown property name</code>.去stockoverflow找到对应原因如下:</p></li></ul> <blockquote><p>在chrome控制台中，您可以看到在最后几个属性之前有4个看似错误编码的字符。它与4个空格缩进匹配。当您将代码粘贴到此处时，CSS文件中可能会有一些奇特的字符显示为空格。</p> <p>您可以简单地尝试删除这些属性前面的缩进空格，看看是否可行？</p></blockquote> <ul><li>意思就是去掉所有具体样式前的缩进和空格即可解决</li></ul> <h3 id="行级样式"><a href="#行级样式" class="header-anchor">#</a> 行级样式</h3> <ul><li><p>CSS中的<code>float</code>会影响下一行的样式</p></li> <li><p>下面介绍清除浮动的三个方式：</p> <p><strong>1.增加一个空的标签（div 或 br等都行），通过clear：both语句消除float对后面元素的影响。</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>main_left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>.main{float:left;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>side_left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>.side{float:right;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token comment">&lt;!--增加一个空标签--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">clear</span><span class="token punctuation">:</span>both<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>.footer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>缺点：需要加很多无意义的标签，对后期维护不利。如果是小程序，那没关系，但如果是大工程，还是慎用。</p> <p><strong>2.使用:after 伪元素</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.clearIt</span> <span class="token punctuation">{</span> <span class="token property">zoom</span><span class="token punctuation">:</span>1<span class="token punctuation">;</span> <span class="token punctuation">}</span>
.<span class="token property">clearIt</span><span class="token punctuation">:</span>before<span class="token punctuation">;</span>  
 <span class="token comment">/*加上before可以防止浏览器顶部的空白崩溃（就是上一个div的margin-bottom和下边的margin-top会发生叠加）*/</span>
 <span class="token selector">.clearIt:after</span> <span class="token punctuation">{</span>
    <span class="token property">content</span><span class="token punctuation">:</span><span class="token string">&quot;.&quot;</span><span class="token punctuation">;</span>
    <span class="token property">display</span><span class="token punctuation">:</span>block<span class="token punctuation">;</span> 
    <span class="token property">height</span><span class="token punctuation">:</span>0<span class="token punctuation">;</span>
    <span class="token property">visibility</span><span class="token punctuation">:</span>hidden<span class="token punctuation">;</span> 
    <span class="token property">clear</span><span class="token punctuation">:</span>both<span class="token punctuation">;</span> 
<span class="token punctuation">}</span>
<span class="token comment">/*
display:block 使生成的元素以块级元素显示,占满剩余空间;
height:0 避免生成内容破坏原有布局的高度。
visibility:hidden 使生成的内容不可见，并允许可能被生成内容盖住的内容可以进行点击和交互;
通过 content:&quot;.&quot;生成内容作为最后一个元素，至于content里面是点还是其他都是可以的，例如oocss里面就有经典的 content:&quot;XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX&quot;,有些版本可能content 里面内容为空,一丝冰凉是不推荐这样做的,firefox直到7.0 content:”&quot; 仍然会产生额外的空隙；
zoom：1 触发IE hasLayout。
*/</span>
</code></pre></div><p><strong>3.在父元素设置 overflow：auto</strong></p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token comment">&lt;!--为父元素设置overflow--&gt;</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap<span class="token punctuation">&quot;</span></span>  <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span><span class="token value css language-css"><span class="token property">overflow</span><span class="token punctuation">:</span>auto<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_main_left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>.main{float:left;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>wrap_side_left<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>.side{float:right;}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>footer<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>.footer<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><img src="https://img-blog.csdn.net/20181003155359802?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L1NlYXJjaGluX1I=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="img"></p> <p>当父元素设置了overflow：auto之后，内容元素会被修剪，超出元素不可见。</p> <p>这种方式的优点是不存在结构和语义化问题，代码量极少。但缺点也很严重，当内容增多时容易因为不会自动换行而导致内容被隐藏掉，无法显示需要溢出的元素。</p> <p><strong>其实只有clear：both是用来消除float的影响。其它的几种方式都是通过隐藏内容来达到自己的目的。</strong></p></li></ul> <h2 id="双击表格进入编辑页面"><a href="#双击表格进入编辑页面" class="header-anchor">#</a> 双击表格进入编辑页面</h2> <ul><li><p>想完成双击表格中的一行,就触发和编辑按钮一样的效果,就需要去listReasult中的最下面的返回部分的代码中返回的那段html最后拼接上一组script标签.在其中写好jquery方法,代码如下:</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$tr</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$formName</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$formName</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;listForm&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'html'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$page</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hint'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token variable">$button</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;form name='&quot;</span><span class="token operator">.</span><span class="token variable">$formName</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;'&gt;&quot;</span><span class="token operator">.</span>space<span class="token operator">.</span><span class="token function">tableMany</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;tr&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$tr</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;text&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$tdText</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/form&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$page</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span><span class="token operator">.</span>clear<span class="token operator">.</span>
    <span class="token string double-quoted-string">&quot;&lt;style type=\&quot;text/css\&quot;&gt;
    input[type=\&quot;checkbox\&quot;]{
        zoom:180%;
        }
    &lt;/style&gt;
    &lt;script&gt;
       $(function(){
			$('tr').on('dblclick',function(){
				if($(this).children().children().is('.spanButton')){
				    $(this).children().children('.spanButton').click();
				}
			})
		}) 
    &lt;/script&gt;
    &quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="双击标签关闭页面"><a href="#双击标签关闭页面" class="header-anchor">#</a> 双击标签关闭页面</h2> <ul><li><p>当你想实现双击导航标签就关闭这个标签对应的页面时,需要去<code>adIndex.php</code>中写好js代码,代码具体如下</p> <div class="language-php extra-class"><pre class="language-php"><code>$<span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;dblclick&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;.iframeTitleNow&quot;</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>$<span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'.iframeClose'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                $<span class="token punctuation">(</span>this<span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;.iframeClose&quot;</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="in查询-不建议使用"><a href="#in查询-不建议使用" class="header-anchor">#</a> in查询(不建议使用)</h2> <ul><li><p>如果你的页面查询中有不属于你这个表的字段,就需要使用SQL语句中的in关键字来查询.</p></li> <li><p>and后面跟的那个字段就是你当前表和你要查询的条件的字段的那张表的关联ID,之后in进入括号中的SQL语句之后,select 后面跟的字段就是这个外表和你当前表的关联字段对应的那个字段.因为你这两张表只有这两个字段可以用作联系.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'department'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'twoDepartment'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">||</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'dutyName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$and</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'department'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token variable">$and</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;and adDutyId in (select id form adDuty where department = '<span class="token interpolation"><span class="token variable">$data</span><span class="token punctuation">[</span>post<span class="token punctuation">]</span></span>['department']')&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'twoDepartment'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token variable">$and</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;and adDutyId in (select id form adDuty where twoDepartment = '<span class="token interpolation"><span class="token variable">$data</span><span class="token punctuation">[</span>post<span class="token punctuation">]</span></span>['twoDepartment']')&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'dutyName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token variable">$and</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;and adDutyId in (select id form adDuty where dutyName = '<span class="token interpolation"><span class="token variable">$data</span><span class="token punctuation">[</span>post<span class="token punctuation">]</span></span>['dutyName']')&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="框架自带图片上传方法photo"><a href="#框架自带图片上传方法photo" class="header-anchor">#</a> 框架自带图片上传方法photo</h2> <ul><li><p>框架里<strong>自带的图片上传</strong>有一个photo方法.如果要使用单个图片上传就用如下代码</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">$get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;adAssets&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//定义参数</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$para</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">suiji</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;新增固定资产&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;button&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;新建&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//基本参数</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token variable">$assets</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;assets&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot; id = '<span class="token interpolation"><span class="token variable">$get</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span></span>' &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$assets</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$para</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;未找到此记录&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token variable">$menu</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;edit&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;基本信息&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;info&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;辅助信息&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//菜单数组</span>
            <span class="token variable">$para</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$assets</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$assets</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;button&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;更新&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;menu&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$menu</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$para</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'other'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">photo</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;实景图&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$assets</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'ico'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;assetsIco&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$assets</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre></div></li> <li><p>如果要一次上传多个就用如下代码</p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token comment">/****行政人事-员工管理-辅助信息********************************************/</span>
<span class="token punctuation">}</span><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token variable">$get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;admin&quot;</span> <span class="token keyword">and</span> <span class="token variable">$get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'menu'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;info&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//数据库查询</span>
    <span class="token variable">$admin</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;admin&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot; adid = '<span class="token interpolation"><span class="token variable">$post</span><span class="token punctuation">[</span>id<span class="token punctuation">]</span></span>' &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//数组</span>
    <span class="token variable">$trData</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string double-quoted-string">&quot;员工ID：&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string double-quoted-string">&quot;账户余额：&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;&lt;span class='red'&gt;￥&quot;</span><span class="token operator">.</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'money'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/span&gt;&quot;</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string double-quoted-string">&quot;更新时间：&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'updateTime'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
            <span class="token string double-quoted-string">&quot;创建时间：&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'time'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$photo</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;头像&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'touxiang'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;身份证正面&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'IDCardFront'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;IDCardFront&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;身份证背面&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'IDCardBack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;IDCardBack&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;毕业证&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'diploma'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;diploma&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;工资卡&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'bankIco'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;bankIco&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$html</span> <span class="token operator">=</span> <span class="token function">tableEdit</span><span class="token punctuation">(</span><span class="token variable">$trData</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token function">photo</span><span class="token punctuation">(</span><span class="token variable">$photo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/****行政人事-员工管理-工作经历********************************************/</span>
</code></pre></div></li></ul> <hr> <ul><li><p>使用框架带的那个photo方法上传图片,在post里写方法时,要注意,<strong>上传图片的文件夹你不能随便写</strong>,因为你写了新的文件夹因为没有权限,就不会创建成功,上传文件也就失败了</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$data</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token string double-quoted-string">&quot;fileName&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;file&quot;</span><span class="token punctuation">,</span><span class="token comment">//上传图片的表单文件域名称</span>
            <span class="token string double-quoted-string">&quot;sqlSearch&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot; select * from admin where adid = '<span class="token interpolation"><span class="token variable">$id</span></span>' &quot;</span><span class="token punctuation">,</span><span class="token comment">//查询图片的数据库代码</span>
            <span class="token string double-quoted-string">&quot;make&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;缩放图像&quot;</span><span class="token punctuation">,</span><span class="token comment">//处理方式：裁剪图像、缩放图像、空</span>
            <span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;更新图像&quot;</span><span class="token punctuation">,</span><span class="token comment">//插入类型：更新图像、新增图像</span>
            <span class="token string double-quoted-string">&quot;field&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;picture&quot;</span><span class="token punctuation">,</span><span class="token comment">//存放图片根目录的数据库字段名</span>
            <span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;img/touxiang/&quot;</span><span class="token operator">.</span><span class="token function">suiji</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;.jpg&quot;</span><span class="token punctuation">,</span><span class="token comment">//新图片保存的网站根目录位置,这里的touxiang就是文件夹名</span>
            <span class="token string double-quoted-string">&quot;maxNum&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">//新增图像时限定的图像总数</span>
            <span class="token string double-quoted-string">&quot;newWidth&quot;</span> <span class="token operator">=&gt;</span> <span class="token number">1000</span><span class="token punctuation">,</span><span class="token comment">//新图像的宽度</span>
            <span class="token string double-quoted-string">&quot;newHeight&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">,</span><span class="token comment">//新图像的高度</span>
            <span class="token string double-quoted-string">&quot;maxHeight&quot;</span> <span class="token operator">=&gt;</span> <span class="token number">4000</span><span class="token punctuation">,</span><span class="token comment">//缩放后图片的最大高度</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="区域联动"><a href="#区域联动" class="header-anchor">#</a> 区域联动</h2> <ul><li><p>如果一个页面需要出现两个区域联动,这时候是不行的,因为它们在一个表单里,重名了,只能有一个.</p></li> <li><p>如果一定要放两个,那就在主form外再连一个小form,把第二个区域联动放进去,这样就可以完成一个页面两个区域联动.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">tab</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
<span class="token comment">//定义参数</span>
        <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

            <span class="token variable">$admin</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;admin&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot; adid = '<span class="token interpolation"><span class="token variable">$id</span></span>' &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>


            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token variable">$para</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;未找到此员工&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token variable">$button</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;更新&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
		<span class="token comment">//第一个区域联动</span>
        <span class="token variable">$trData</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;性别：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;sex&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;选择性别&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;option&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;,&quot;</span><span class="token punctuation">,</span><span class="token function">para</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;sex&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sex'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;生日：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;birthday&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;laydate&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;生日&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'birthday'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;年龄：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;age&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'age'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;民族：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;nationality&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'nationality'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;户口性质：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;residence&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'residence'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;婚否：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;isMarry&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;婚否&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;option&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;,&quot;</span><span class="token punctuation">,</span><span class="token function">para</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;isMarry&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'isMarry'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string double-quoted-string">&quot;生育：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;hasChild&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;生育与否&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;option&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;,&quot;</span><span class="token punctuation">,</span><span class="token function">para</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;hasChild&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hasChild'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;政治面貌：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;politicsStatus&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;生育与否&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;option&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;,&quot;</span><span class="token punctuation">,</span><span class="token function">para</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;politicsStatus&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'politicsStatus'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string double-quoted-string">&quot;档案地址：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;fileAddress&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fileAddress'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;学历：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">select</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;educationalBackground&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;学历&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;option&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;,&quot;</span><span class="token punctuation">,</span><span class="token function">para</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;educationalBackground&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'educationalBackground'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                must<span class="token operator">.</span><span class="token string double-quoted-string">&quot;毕业学校：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;school&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'school'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;专业：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;schoolMajor&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'schoolMajor'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string double-quoted-string">&quot;证书：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;certificate&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'certificate'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;电子邮箱：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;email&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'email'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string double-quoted-string">&quot;联系电话：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;adtel&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adtel'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;身份证号：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;IDCard&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'IDCard'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string double-quoted-string">&quot;身份证居住地址：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">regionSelect</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'adminPersonalForm'</span><span class="token punctuation">,</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'IDCardRegionId'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">.</span>
                    <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;IDCardAddress&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'IDCardAddress'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string double-quoted-string">&quot;工资卡号：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;bankNum&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'bankNum'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;开户行：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;bankName&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'bankName'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token string double-quoted-string">&quot;紧急联系人：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;urgencyContact&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'urgencyContact'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token string double-quoted-string">&quot;紧急联系人电话：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;urgencyPhone&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'urgencyPhone'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//第二个区域联动</span>
<span class="token variable">$trDataTwo</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
                <span class="token keyword">array</span><span class="token punctuation">(</span>
                    <span class="token string double-quoted-string">&quot;现居住地址：&quot;</span> <span class="token operator">=&gt;</span> <span class="token function">regionSelectTwo</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'adminPersonalTwoForm'</span><span class="token punctuation">,</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'liveRegionId'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">.</span>
                        <span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;liveAddress&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'liveAddress'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$photo</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
            <span class="token comment">//头像字段用作员工照片,身份证正面字段用作证件照片</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;员工照片&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'picture'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;picture&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
            <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;身份证&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;url&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'IDCardFront'</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;type&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;IDCardFront&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'adid'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">;</span>
    <span class="token comment">//adminPersonalForm是第一个form,adminPersonalTwoForm是第二个.</span>
        <span class="token variable">$html</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;form name='adminPersonalForm'&gt;&quot;</span><span class="token operator">.</span><span class="token function">tableEdit</span><span class="token punctuation">(</span><span class="token variable">$trData</span><span class="token punctuation">)</span><span class="token operator">.</span>
            <span class="token string double-quoted-string">&quot;&lt;/form&gt;&quot;</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;form name='adminPersonalTwoForm'&gt;&quot;</span><span class="token operator">.</span><span class="token function">tableEdit</span><span class="token punctuation">(</span><span class="token variable">$trDataTwo</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/form&gt;&quot;</span><span class="token operator">.</span><span class="token function">photo</span><span class="token punctuation">(</span><span class="token variable">$photo</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;div onclick=\&quot;subForm('adminPersonalForm,adminPersonalTwoForm',root+'control/data.php?type=adminPersonalEdit')\&quot; class='formButton'&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$button</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/div&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$html</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <h2 id="时间选择框"><a href="#时间选择框" class="header-anchor">#</a> 时间选择框</h2> <ul><li><p>当详情页或分支页有时间选择器时,有时会出现bug,当查询出的时间为空,时间选择器就会默认选中0100-00-00,其实这时数据库存的数据为0000-00-00.</p></li> <li><p>这样子每次选时间都要清空再选非常麻烦,如何解决呢?如果你页面中只有一个时间选择器,那就用if/else解决.</p></li> <li><p>如果你一个页面中有很多个,那就可以用三元运算符来解决,会看起来整齐的多,也不会太多行代码.</p> <div class="language-php extra-class"><pre class="language-php"><code>  <span class="token comment">//只有一个时间选择</span>
		<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'entryTime'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$entryTime</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token variable">$entryTime</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'entryTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">//有多个时间选择,使用三元</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'entryTime'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$entryTime</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$entryTime</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'entryTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'officialTime'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$officialTime</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$officialTime</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'officialTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'changeSalaryTime'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$changeSalaryTime</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$changeSalaryTime</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'changeSalaryTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'endSalaryTime'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$endSalaryTime</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$endSalaryTime</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'endSalaryTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'contractStartDate'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$contractStartDate</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$contractStartDate</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'contractStartDate'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'signContractDate'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$signContractDate</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$signContractDate</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'signContractDate'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'endContractDate'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$endContractDate</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$endContractDate</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'endContractDate'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'quitTime'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">?</span><span class="token variable">$quitTime</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$quitTime</span><span class="token operator">=</span><span class="token variable">$admin</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'quitTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>范围选择日期</p></li> <li><p>因为-符号已经是年月日的分隔符号了,所以使用~~分割时间</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">text</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;time&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;laydate&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;range&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;~&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;title&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;日期选择&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">.</span>
</code></pre></div></li> <li><p>插入<code>$sql</code>中的判断语句就这样生成</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'time'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$timeArr</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;~&quot;</span><span class="token punctuation">,</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'time'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$oneTime</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$timeArr</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$twoTime</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$timeArr</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$time</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;and a.time between '<span class="token interpolation"><span class="token variable">$oneTime</span></span>' and '<span class="token interpolation"><span class="token variable">$twoTime</span></span>'&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="输入框"><a href="#输入框" class="header-anchor">#</a> 输入框</h2> <ul><li><p>如果有些int类型的数据输入框,当你这个字段为0时,页面上输入框中会不显示任何数字,要想解决这个问题,就需要去entend.php中写一个可以显示0的输入框方法textZero,在生成输入框时是用这个方法即可.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**********生成可以显示0的单行文本框********************************************************/</span>
<span class="token comment">/*
$data = array(
	&quot;name&quot; =&gt; &quot;文本框name&quot;,
	&quot;id&quot; =&gt; &quot;文本框id&quot;,
	&quot;laydate&quot; =&gt; array()//&quot;调用laydate日历框架，数组内可以放一些额外参数&quot;,
	&quot;title&quot; =&gt; &quot;文本框标题&quot;,
	&quot;value&quot; =&gt; &quot;文本框value&quot;,
	&quot;class&quot; =&gt; &quot;文本框的class&quot;,
	&quot;click&quot; =&gt; &quot;鼠标点击事件函数名&quot;,
	&quot;blur&quot; =&gt; &quot;元素失去焦点事件函数名&quot;,
	&quot;keyup&quot; =&gt; &quot;某个键盘按键被松开时的函数名&quot;,
	&quot;other&quot; =&gt; &quot;串联其他属性&quot;,
);
*/</span>
<span class="token keyword">function</span> <span class="token function-definition function">textZero</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token variable">$attribute</span> <span class="token operator">=</span> <span class="token variable">$js</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; id='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token function">array_key_exists</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;laydate&quot;</span><span class="token punctuation">,</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//如果存在laydate键名</span>
        <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token function">suiji</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; id='&quot;</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
        <span class="token variable">$json</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword type-casting">array</span><span class="token punctuation">)</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'laydate'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$json</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;,&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;:'&quot;</span><span class="token operator">.</span><span class="token variable">$value</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;'&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$js</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;script&gt;$(function(){laydate.render({elem:'#&quot;</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;'&quot;</span><span class="token operator">.</span><span class="token variable">$json</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;});});&lt;/script&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;  placeholder='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' title='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'class'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; class='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'class'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'click'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; onclick='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'click'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;(this)' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; value='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'value'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'blur'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; onblur='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'blur'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;(this)' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'keyup'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; onkeyup='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'keyup'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;(this)' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$html</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;input type='text' name='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token operator">.</span><span class="token variable">$attribute</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'other'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$js</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;\n&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$html</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="时间计算"><a href="#时间计算" class="header-anchor">#</a> 时间计算</h2> <h3 id="月份差额"><a href="#月份差额" class="header-anchor">#</a> 月份差额</h3> <ul><li><p>如果想获得两个<strong>时间的月差额</strong>,就需要以下的方法</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function-definition function">getMonthNum</span><span class="token punctuation">(</span> <span class="token variable">$date1</span><span class="token punctuation">,</span> <span class="token variable">$date2</span><span class="token punctuation">,</span> <span class="token variable">$tags</span><span class="token operator">=</span><span class="token string single-quoted-string">'-'</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>    <span class="token variable">$date1</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token variable">$tags</span><span class="token punctuation">,</span><span class="token variable">$date1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token variable">$date2</span> <span class="token operator">=</span> <span class="token function">explode</span><span class="token punctuation">(</span><span class="token variable">$tags</span><span class="token punctuation">,</span><span class="token variable">$date2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token keyword">return</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token variable">$date1</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token variable">$date2</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">12</span> <span class="token operator">+</span> <span class="token function">abs</span><span class="token punctuation">(</span><span class="token variable">$date1</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token variable">$date2</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <h2 id="时间比较与计算"><a href="#时间比较与计算" class="header-anchor">#</a> 时间比较与计算</h2> <ul><li><p>php给时间(年月日时分秒)加时间(天,小时,月)</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">// 当前时间戳  格式：2019-03-13 18:00:00</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'now'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+1秒</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+1second'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+1分</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+1minute'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+1小时</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+1hour'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+1天 </span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+1day'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+1周 </span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+1week'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+1月 </span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+1month'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+1年</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+1year'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 当前时间戳+12年，12月，12天，12小时，12分，12秒</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+12year 12month 12day 12hour 12minute 12second'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token variable">$t</span> <span class="token operator">=</span> <span class="token number">1483967416</span><span class="token punctuation">;</span> <span class="token comment">// 指定时间戳</span>
 
<span class="token keyword">echo</span> <span class="token variable">$date</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token variable">$t</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">/*方法一*/</span>
 
<span class="token comment">// 指定时间戳+1天</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token variable">$t</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 指定时间戳+1年</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token variable">$t</span><span class="token operator">+</span><span class="token number">365</span><span class="token operator">*</span><span class="token number">24</span><span class="token operator">*</span><span class="token number">60</span><span class="token operator">*</span><span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">/*方法二*/</span>
 
<span class="token comment">//$t是指定时间戳</span>
 
<span class="token comment">// 指定时间戳+1天</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;+1day&quot;</span><span class="token punctuation">,</span> <span class="token variable">$t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
<span class="token comment">// 指定时间戳+1年</span>
<span class="token keyword">echo</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;+1year&quot;</span><span class="token punctuation">,</span> <span class="token variable">$t</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div></li> <li><p>php中如果想对比两个时间比如<code>2019-10-30 11:44:03</code>这种,那就需要先用<code>strtotime()</code>方法将时间放进去再进行对比,用大于小于号对比即可.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$resultTime</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$date</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h2 id="事务"><a href="#事务" class="header-anchor">#</a> 事务</h2> <ul><li><p>PHP事务操作</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">mysqli_autocommit</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">,</span><span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示事务开始</span>
<span class="token variable">$update</span> <span class="token operator">=</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;table&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;salary&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;field&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$field</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;where&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;id = '&quot;</span> <span class="token operator">.</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//编辑字段更新</span>
<span class="token variable">$computeUpdate</span> <span class="token operator">=</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;table&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;salary&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;field&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$computeField</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;where&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;id = '&quot;</span> <span class="token operator">.</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//算法字段更新</span>

            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$update</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;更新成功&quot;</span><span class="token operator">&amp;&amp;</span><span class="token variable">$computeUpdate</span> <span class="token operator">==</span> <span class="token string double-quoted-string">&quot;更新成功&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token function">mysqli_commit</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//成功即提交</span>
                <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$update</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token function">mysqli_rollback</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$update</span><span class="token punctuation">;</span>
                <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$computeUpdate</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token function">mysqli_autocommit</span><span class="token punctuation">(</span><span class="token variable">$con</span><span class="token punctuation">,</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//表示事务结束</span>
</code></pre></div></li></ul> <h2 id="api接口"><a href="#api接口" class="header-anchor">#</a> API接口</h2> <ul><li><p>调用他人API接口函数</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * [http 调用接口函数]
 * @Date   2016-07-11
 * @Author GeorgeHao
 * @param  string       $url     [接口地址]
 * @param  array        $params  [数组]
 * @param  string       $method  [GET\POST\DELETE\PUT]
 * @param  array        $header  [HTTP头信息]
 * @param  integer      $timeout [超时时间]
 * @return [type]                [接口返回数据]
 */</span>
<span class="token keyword">function</span> <span class="token function-definition function">http</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">,</span> <span class="token variable">$params</span><span class="token punctuation">,</span> <span class="token variable">$method</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'GET'</span><span class="token punctuation">,</span> <span class="token variable">$header</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$timeout</span> <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
    <span class="token comment">// POST 提交方式的传入 $set_params 必须是字符串形式</span>
    <span class="token variable">$opts</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span>
        <span class="token constant">CURLOPT_TIMEOUT</span> <span class="token operator">=&gt;</span> <span class="token variable">$timeout</span><span class="token punctuation">,</span>
        <span class="token constant">CURLOPT_RETURNTRANSFER</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token constant">CURLOPT_SSL_VERIFYPEER</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
        <span class="token constant">CURLOPT_SSL_VERIFYHOST</span> <span class="token operator">=&gt;</span> <span class="token constant boolean">false</span><span class="token punctuation">,</span>
        <span class="token constant">CURLOPT_HTTPHEADER</span> <span class="token operator">=&gt;</span> <span class="token variable">$header</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/* 根据请求类型设置特定参数 */</span>
    <span class="token keyword">switch</span> <span class="token punctuation">(</span><span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$method</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'GET'</span><span class="token punctuation">:</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_URL</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$url</span> <span class="token operator">.</span> <span class="token string single-quoted-string">'?'</span> <span class="token operator">.</span> <span class="token function">http_build_query</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'POST'</span><span class="token punctuation">:</span>
            <span class="token variable">$params</span> <span class="token operator">=</span> <span class="token function">http_build_query</span><span class="token punctuation">(</span><span class="token variable">$params</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_URL</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$url</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_POST</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$params</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'DELETE'</span><span class="token punctuation">:</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_URL</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$url</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_HTTPHEADER</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;X-HTTP-Method-Override: DELETE&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_CUSTOMREQUEST</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'DELETE'</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$params</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">case</span> <span class="token string single-quoted-string">'PUT'</span><span class="token punctuation">:</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_URL</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$url</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_POST</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_CUSTOMREQUEST</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'PUT'</span><span class="token punctuation">;</span>
            <span class="token variable">$opts</span><span class="token punctuation">[</span><span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$params</span><span class="token punctuation">;</span>
            <span class="token keyword">break</span><span class="token punctuation">;</span>
        <span class="token keyword">default</span><span class="token punctuation">:</span>
            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'不支持的请求方式！'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/* 初始化并执行curl请求 */</span>
    <span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">curl_setopt_array</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token variable">$opts</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token variable">$error</span> <span class="token operator">=</span> <span class="token function">curl_error</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$data</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="点击按钮切换表格显示类别"><a href="#点击按钮切换表格显示类别" class="header-anchor">#</a> 点击按钮切换表格显示类别</h2> <ul><li><p>表格主页面点击按钮切换表格显示数据种类</p></li> <li><p>首先在类中的listSearch写好对应的按钮,按钮上显示不同种类的数据条数,使用sqlNum查询出.</p></li> <li><p>hidden隐藏域带的是默认展示的按钮数据种类,对应workFlow的状态</p></li> <li><p>对应按钮上的js方法传入点击这个按钮时希望显示的数据种类的状态.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$waiteNum</span> <span class="token operator">=</span> <span class="token function">sqlNum</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;buyCar&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot; workFlow = '退款中' &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$yetNum</span> <span class="token operator">=</span> <span class="token function">sqlNum</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;buyCar&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot; workFlow = '已通过' or workFlow = '已驳回'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'html'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
<span class="token variable">$result</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'html'</span><span class="token punctuation">]</span> <span class="token operator">.=</span>
<span class="token string double-quoted-string">&quot;&lt;div style='margin: 12px;'&gt;
    &lt;span class='bigSpan choice' onclick=\&quot;switchAudit(this,'退款中')\&quot;&gt;待审核列表&lt;em class='numEm'&gt;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$waiteNum</span><span class="token punctuation">}</span></span>&lt;/em&gt;&lt;/span&gt;
    &lt;span class='bigSpan'  onclick=\&quot;switchAudit(this,'已通过')\&quot;&gt;已审核列表&lt;em class='numEm'&gt;<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$yetNum</span><span class="token punctuation">}</span></span>&lt;/em&gt;&lt;/span&gt;
                &lt;/div&gt;&quot;</span><span class="token operator">.</span>
            <span class="token function">hidden</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;workFlow&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;退款中&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">.</span>
</code></pre></div></li> <li><p>css样式写好放到<code>extend.css</code>中</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.choice</span><span class="token punctuation">{</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #3e97ff<span class="token important">!important</span><span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #ffffff<span class="token important">!important</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.bigSpan</span><span class="token punctuation">{</span>
    <span class="token property">padding</span><span class="token punctuation">:</span> 0px 6px 0 6px<span class="token punctuation">;</span>
    <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #cddba2<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 4px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #ffffff<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> #7d6b6b<span class="token punctuation">;</span>
    <span class="token property">cursor</span><span class="token punctuation">:</span> pointer<span class="token punctuation">;</span>
    <span class="token property">white-space</span><span class="token punctuation">:</span> nowrap<span class="token punctuation">;</span>
    <span class="token property">user-select</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">margin</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.numEm</span><span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
    <span class="token property">color</span><span class="token punctuation">:</span> black<span class="token punctuation">;</span>
    <span class="token property">top</span><span class="token punctuation">:</span> -11px<span class="token punctuation">;</span>
    <span class="token property">right</span><span class="token punctuation">:</span> -16px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> yellow<span class="token punctuation">;</span>
    <span class="token property">text-align</span><span class="token punctuation">:</span> center<span class="token punctuation">;</span>
    <span class="token property">font-style</span><span class="token punctuation">:</span> normal<span class="token punctuation">;</span>
    <span class="token property">font-size</span><span class="token punctuation">:</span> 13px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>js方法放到<code>extend.js</code>中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**********切换审核列表**********/</span>
<span class="token keyword">function</span> <span class="token function">switchAudit</span><span class="token punctuation">(</span><span class="token parameter">e<span class="token punctuation">,</span>workFlow</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.bigSpan&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">&quot;choice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">&quot;choice&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;[name='workFlow']&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>workFlow<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">searchFormSub</span><span class="token punctuation">(</span><span class="token string">'refundAudit'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>如果每点击一次按钮,切换状态时只切换包含一种状态,那就直接把workFlow标签的内容拿到放到<code>$euqal</code>中</p></li> <li><p>如果是切换的状态包含不止一种,比如<code>workFlow = '已通过' or workFlow = '已退款'</code>,那就要在listResult中做判断,如果workFlow标签不为空,就判断传过来的是什么,只要是对应的标签的值,就生成一个变量,变量的内容是SQL语句的片段.放到sql语句的where后面即可.</p> <div class="language-php extra-class"><pre class="language-php"><code> <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'workFlow'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'workFlow'</span><span class="token punctuation">]</span><span class="token operator">==</span><span class="token string double-quoted-string">&quot;已通过&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token variable">$workFlow</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;and b.workFlow = '已通过' or b.workFlow = '已驳回'&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token variable">$workFlow</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;and b.workFlow = '<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'workFlow'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>'&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <h2 id="挑选限定时间活动中时间最合适的那个"><a href="#挑选限定时间活动中时间最合适的那个" class="header-anchor">#</a> 挑选限定时间活动中时间最合适的那个</h2> <ul><li><p>有一种情况,这趟车,开车前十二小时之内退款打五折,十小时内退款打三折,三小时内退款打一折.</p></li> <li><p>我们去用当前时间判断很可能有个时间,同时满足十小时和十二小时内,那怎么筛选出最合适的退款比例呢?</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$refundRatios</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$distanceStartTime</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$driver</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;driver&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id = '<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'driverId'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$journey</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;journey&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;id = '<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$array</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'journeyId'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token variable">$date</span> <span class="token operator">=</span> <span class="token variable">$journey</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'date'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot; &quot;</span><span class="token operator">.</span><span class="token variable">$journey</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'startTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//将车程中的出发日期和出发时间拼接</span>
            <span class="token variable">$refunds</span> <span class="token operator">=</span> <span class="token function">sqlQueryAll</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;select * from refund where journeyId = '<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$journey</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//查找该车程所有退款信息</span>
            <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$refunds</span> <span class="token keyword">as</span> <span class="token variable">$refund</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//将现在的时间加上当前条退款信息中的距离出发时间(h)</span>
                <span class="token variable">$resultTime</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'+'</span><span class="token operator">.</span><span class="token variable">$refund</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'distanceStartTime'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string single-quoted-string">'hour'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//如果加完之后的结果比开车出发时间早就说明退款条件成立,但是同时可能有好几条成立的</span>
                <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$resultTime</span><span class="token punctuation">)</span><span class="token operator">&lt;</span><span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$date</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                    <span class="token comment">//把每条成立的退款比例和距离发车时间存进两个空数组</span>
                    <span class="token variable">$refundRatios</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$refund</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'refundRatio'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                    <span class="token variable">$distanceStartTime</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$refund</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'distanceStartTime'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">count</span><span class="token punctuation">(</span><span class="token variable">$distanceStartTime</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token comment">//拿出距离发车时间数组中最小的那个时间,那就是适用的那条退款信息</span>
                <span class="token variable">$minTime</span> <span class="token operator">=</span> <span class="token function">min</span><span class="token punctuation">(</span><span class="token variable">$distanceStartTime</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                <span class="token comment">//倒转距离发车时间数组,通过min函数取得的最小时间值,拿到对应的键$key</span>
                <span class="token variable">$reserve</span> <span class="token operator">=</span> <span class="token function">array_flip</span><span class="token punctuation">(</span><span class="token variable">$distanceStartTime</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//颠倒那个我们想删掉某个元素的数组</span>
                <span class="token variable">$key</span> <span class="token operator">=</span> <span class="token variable">$reserve</span><span class="token punctuation">[</span><span class="token variable">$minTime</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                <span class="token variable">$realRatio</span> <span class="token operator">=</span> <span class="token variable">$refundRatios</span><span class="token punctuation">[</span><span class="token variable">$key</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token comment">//通过对应的键在另一个退款比例中找到对应的值,那这个比例去乘付款金额既得到退款金额</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token variable">$realRatio</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="二维码"><a href="#二维码" class="header-anchor">#</a> 二维码</h2> <ul><li><p>二维码生成</p></li> <li><p>先写一个链接定位到你处理数据的接口,用get携带上必须的参数,再用下面的链接脸上urlencode处理后的链接,返回给前端,放到src里就是一张二维码图片</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">//礼包</span>
    <span class="token variable">$url</span> <span class="token operator">=</span> root<span class="token operator">.</span><span class="token string double-quoted-string">&quot;m/mIndex.php?shareId=&quot;</span><span class="token operator">.</span><span class="token variable">$kehu</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'khid'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&amp;bagId=&quot;</span><span class="token punctuation">;</span>
    <span class="token variable">$shareQRCode</span> <span class="token operator">=</span> root<span class="token operator">.</span><span class="token string double-quoted-string">&quot;pay/wxpay/wxScanPng.php?url=&quot;</span><span class="token operator">.</span><span class="token function">urlencode</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//分享图片;</span>
</code></pre></div></li></ul> <h2 id="微信"><a href="#微信" class="header-anchor">#</a> 微信</h2> <h3 id="收付款"><a href="#收付款" class="header-anchor">#</a> 收付款</h3> <ul><li><p>微信退款类</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**
 * 微信支付
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">WxPay</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$appid</span><span class="token punctuation">;</span>       <span class="token comment">#公众账号ID</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token variable">$mch_id</span><span class="token punctuation">;</span>      <span class="token comment">#商户号</span>
    <span class="token comment">/**
     * 微信退款
     * @param string $transaction_id    微信订单号(pay_payId)
     * @param string $out_refund_no     商户退款单号
     * @param Int $total_fee        订单金额（单位为分）
     * @param Int $refund_fee       退款金额（单位为分）
     * @return array
     * @author r7
     */</span>
    <span class="token comment">/**[return_code] =&gt; SUCCESS
    [return_msg] =&gt; OK
    [appid] =&gt; wx7e667e862c0c4d65
    [mch_id] =&gt; 1503228781
    [nonce_str] =&gt; VvIMLNr0lkQWcGZr
    [sign] =&gt; 9CEA0EA78D50CAAB5011497AEF81F5E5
    [result_code] =&gt; FAIL
    [err_code] =&gt; NOTENOUGH
    [err_code_des] =&gt; 交易未结算资金不足，请使用可用余额退款
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">refund</span><span class="token punctuation">(</span><span class="token variable">$transaction_id</span><span class="token punctuation">,</span><span class="token variable">$out_refund_no</span><span class="token punctuation">,</span><span class="token variable">$total_fee</span><span class="token punctuation">,</span><span class="token variable">$refund_fee</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">#退款参数</span>
        <span class="token variable">$refundorder</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">'appid'</span>         <span class="token operator">=&gt;</span> <span class="token function">para</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wxAppid'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token comment">#公众账号ID</span>
            <span class="token string single-quoted-string">'mch_id'</span>        <span class="token operator">=&gt;</span> <span class="token function">para</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wxPayId'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>         <span class="token comment">#商户号</span>
            <span class="token string single-quoted-string">'nonce_str'</span>     <span class="token operator">=&gt;</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token function">getNonceStr</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>     <span class="token comment">#随机字符串</span>
            <span class="token string single-quoted-string">'transaction_id'</span><span class="token operator">=&gt;</span> <span class="token variable">$transaction_id</span><span class="token punctuation">,</span>         <span class="token comment">#微信订单号</span>
            <span class="token string single-quoted-string">'out_refund_no'</span> <span class="token operator">=&gt;</span> <span class="token variable">$out_refund_no</span><span class="token punctuation">,</span>          <span class="token comment">#商户退款单号</span>
            <span class="token string single-quoted-string">'total_fee'</span>     <span class="token operator">=&gt;</span> <span class="token variable">$total_fee</span> <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">,</span>        <span class="token comment">#订单金额（单位为分）</span>
            <span class="token string single-quoted-string">'refund_fee'</span>    <span class="token operator">=&gt;</span> <span class="token variable">$refund_fee</span> <span class="token operator">*</span> <span class="token number">100</span>        <span class="token comment">#退款金额（单位为分）</span>
        <span class="token punctuation">]</span><span class="token punctuation">;</span>

        <span class="token variable">$refundorder</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'sign'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token function">makeSign</span><span class="token punctuation">(</span><span class="token variable">$refundorder</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">#签名</span>

        <span class="token comment">#请求数据,进行退款</span>

        <span class="token comment">#将要提交的参数生成xml文件</span>
        <span class="token variable">$xml</span> <span class="token operator">=</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token function">ToXml</span><span class="token punctuation">(</span><span class="token variable">$refundorder</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//以post方式提交xml到对应的接口url，并获得prepay_id</span>
        <span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;https://api.mch.weixin.qq.com/secapi/pay/refund&quot;</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token function">curlPost</span><span class="token punctuation">(</span><span class="token variable">$url</span><span class="token punctuation">,</span> <span class="token variable">$xml</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//curl($url,$xml);</span>

        <span class="token variable">$res</span> <span class="token operator">=</span> <span class="token function">xmlToArray</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
        $xmldata = self::array2xml($refundorder);
        $url = 'https://api.mch.weixin.qq.com/secapi/pay/refund';
        $res = self::curl_post_ssl($url, $xmldata);

        if(!$res){
            return array('status'=&gt;0, 'msg'=&gt;&quot;Can't connect the server&quot; );
        }
        */</span>
        <span class="token comment">//发起退款失败</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token operator">!</span><span class="token variable">$res</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'status'</span><span class="token operator">=&gt;</span><span class="token number">201</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'msg'</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">'不能连接服务器'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//退款事变</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strval</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'result_code'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'FAIL'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'status'</span><span class="token operator">=&gt;</span><span class="token number">201</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'msg'</span><span class="token operator">=&gt;</span><span class="token function">strval</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'err_code'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">':'</span><span class="token operator">.</span><span class="token function">strval</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'err_code_des'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//通信标识失败</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">strval</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'return_code'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'FAIL'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'status'</span><span class="token operator">=&gt;</span><span class="token number">201</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'msg'</span><span class="token operator">=&gt;</span><span class="token function">strval</span><span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'return_msg'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token variable">$res</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 输出xml字符
     * @throws WxPayException
     **/</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">ToXml</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$xml</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;xml&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$arr</span> <span class="token keyword">as</span> <span class="token variable">$key</span><span class="token operator">=&gt;</span><span class="token variable">$val</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_numeric</span><span class="token punctuation">(</span><span class="token variable">$val</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token variable">$xml</span><span class="token operator">.=</span><span class="token string double-quoted-string">&quot;&lt;&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$val</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&gt;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token variable">$xml</span><span class="token operator">.=</span><span class="token string double-quoted-string">&quot;&lt;&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&gt;&lt;![CDATA[&quot;</span><span class="token operator">.</span><span class="token variable">$val</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;]]&gt;&lt;/&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&gt;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$xml</span><span class="token operator">.=</span><span class="token string double-quoted-string">&quot;&lt;/xml&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$xml</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">curlPost</span><span class="token punctuation">(</span><span class="token variable">$url</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token variable">$postData</span> <span class="token operator">=</span> <span class="token string single-quoted-string">''</span><span class="token punctuation">,</span> <span class="token variable">$options</span> <span class="token operator">=</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$postData</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$postData</span> <span class="token operator">=</span> <span class="token function">http_build_query</span><span class="token punctuation">(</span><span class="token variable">$postData</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$ch</span> <span class="token operator">=</span> <span class="token function">curl_init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_URL</span><span class="token punctuation">,</span> <span class="token variable">$url</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_RETURNTRANSFER</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POST</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_POSTFIELDS</span><span class="token punctuation">,</span> <span class="token variable">$postData</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_TIMEOUT</span><span class="token punctuation">,</span> <span class="token number">30</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//设置cURL允许执行的最长秒数</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">curl_setopt_array</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token variable">$options</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//https请求 不验证证书和host</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_SSL_VERIFYPEER</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span> <span class="token constant">CURLOPT_SSL_VERIFYHOST</span><span class="token punctuation">,</span> <span class="token constant boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//第一种方法，cert 与 key 分别属于两个.pem文件</span>
        <span class="token comment">//默认格式为PEM，可以注释</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_SSLCERTTYPE</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'PEM'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_SSLCERT</span><span class="token punctuation">,</span>serverRoot<span class="token operator">.</span><span class="token string single-quoted-string">'/pay/wxpay/apiclient_cert.pem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//默认格式为PEM，可以注释</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_SSLKEYTYPE</span><span class="token punctuation">,</span><span class="token string single-quoted-string">'PEM'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_setopt</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">,</span><span class="token constant">CURLOPT_SSLKEY</span><span class="token punctuation">,</span>serverRoot<span class="token operator">.</span><span class="token string single-quoted-string">'/pay/wxpay/apiclient_key.pem'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token function">curl_exec</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">curl_close</span><span class="token punctuation">(</span><span class="token variable">$ch</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$data</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 生成随机数
     * @param string $prefix    随机数前缀
     * @param integer $len      随机数总长度
     * @return mixed
     * @author r7
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">getNonceStr</span><span class="token punctuation">(</span><span class="token variable">$prefix</span> <span class="token operator">=</span> <span class="token string single-quoted-string">'raul'</span><span class="token punctuation">,</span><span class="token variable">$len</span> <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$time</span> <span class="token operator">=</span> <span class="token function">time</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string single-quoted-string">''</span><span class="token punctuation">;</span>
        <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token variable">$prefix</span><span class="token punctuation">;</span>
        <span class="token variable">$prefix_len</span> <span class="token operator">=</span> <span class="token function">strlen</span><span class="token punctuation">(</span><span class="token variable">$prefix</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">#前缀长度</span>
        <span class="token variable">$j</span> <span class="token operator">=</span> <span class="token variable">$len</span> <span class="token operator">-</span> <span class="token variable">$prefix_len</span> <span class="token operator">-</span> <span class="token number">4</span><span class="token punctuation">;</span>    <span class="token comment">#循环次数</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token variable">$i</span><span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span> <span class="token variable">$i</span> <span class="token operator">&lt;</span> <span class="token variable">$j</span><span class="token punctuation">;</span> <span class="token variable">$i</span><span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$id</span> <span class="token operator">.=</span> <span class="token variable">$time</span><span class="token punctuation">[</span><span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$id</span> <span class="token operator">.=</span> <span class="token function">mt_rand</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">,</span><span class="token number">9999</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$id</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 生成签名
     * @return 签名，本函数不覆盖sign成员变量，如要设置签名需要调用SetSign方法赋值
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">makeSign</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//签名步骤一：按字典序排序参数</span>
        <span class="token function">ksort</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$string</span> <span class="token operator">=</span> <span class="token keyword static-context">self</span><span class="token operator">::</span><span class="token function">ToUrlParams</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//签名步骤二：在string后加入KEY</span>
        <span class="token variable">$string</span> <span class="token operator">=</span> <span class="token variable">$string</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&amp;key=&quot;</span><span class="token operator">.</span><span class="token function">para</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wxPayKey'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//签名步骤三：MD5加密</span>
        <span class="token variable">$string</span> <span class="token operator">=</span> <span class="token function">md5</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//签名步骤四：所有字符转为大写</span>
        <span class="token variable">$result</span> <span class="token operator">=</span> <span class="token function">strtoupper</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$result</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">/**
     * 格式化参数格式化成url参数
     * @param array $arr
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">function</span> <span class="token function-definition function">ToUrlParams</span><span class="token punctuation">(</span><span class="token variable">$arr</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$string</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$arr</span> <span class="token keyword">as</span> <span class="token variable">$k</span> <span class="token operator">=&gt;</span> <span class="token variable">$v</span><span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$k</span> <span class="token operator">!=</span> <span class="token string double-quoted-string">&quot;sign&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$v</span> <span class="token operator">!=</span> <span class="token string double-quoted-string">&quot;&quot;</span> <span class="token operator">&amp;&amp;</span> <span class="token operator">!</span><span class="token function">is_array</span><span class="token punctuation">(</span><span class="token variable">$v</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token variable">$string</span> <span class="token operator">.=</span> <span class="token variable">$k</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;=&quot;</span> <span class="token operator">.</span> <span class="token variable">$v</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;&amp;&quot;</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$string</span> <span class="token operator">=</span> <span class="token function">trim</span><span class="token punctuation">(</span><span class="token variable">$string</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot;&amp;&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$string</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>微信退款方法使用</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/******退款*******/</span>
<span class="token variable">$pay</span> <span class="token operator">=</span> <span class="token function">query</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;pay&quot;</span><span class="token punctuation">,</span> <span class="token string double-quoted-string">&quot; orderIdGroup LIKE '%<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>%' and workFlow = '已支付' &quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$returnMoney</span> <span class="token operator">=</span> <span class="token variable">$pay</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'money'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$res</span> <span class="token operator">=</span> <span class="token class-name static-context">WxPay</span><span class="token operator">::</span><span class="token function">refund</span><span class="token punctuation">(</span><span class="token variable">$pay</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'payId'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$pay</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'money'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$returnMoney</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$res</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'return_msg'</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string single-quoted-string">'OK'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token variable">$json</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'warn'</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">update</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;table&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;buyCar&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;field&quot;</span> <span class="token operator">=&gt;</span> <span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;workFlow&quot;</span><span class="token operator">=&gt;</span><span class="token string double-quoted-string">&quot;已取消&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;updateTime&quot;</span><span class="token operator">=&gt;</span><span class="token variable">$time</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;where&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;id = '&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'post'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">/******退款*******/</span>
</code></pre></div></li></ul> <h3 id="获取id"><a href="#获取id" class="header-anchor">#</a> 获取ID</h3> <ul><li><p>微信网页获取openid</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/***********获取微信信息*************/</span>
<span class="token variable">$code</span>      <span class="token operator">=</span> <span class="token variable">$post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'code'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$appId</span>     <span class="token operator">=</span> <span class="token function">para</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wxAppid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$appSecret</span> <span class="token operator">=</span> <span class="token function">para</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wxAppSecret'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//获取openid</span>
<span class="token variable">$token</span>  <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;https://api.weixin.qq.com/sns/oauth2/access_token?appid=<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$appId</span><span class="token punctuation">}</span></span>&amp;secret=<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$appSecret</span><span class="token punctuation">}</span></span>&amp;code=<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$code</span><span class="token punctuation">}</span></span>&amp;grant_type=authorization_code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$openid</span> <span class="token operator">=</span> <span class="token variable">$token</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'openid'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>微信小程序获取openid</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/***********获取微信信息*************/</span>
<span class="token variable">$code</span>      <span class="token operator">=</span> <span class="token variable">$post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'code'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token variable">$appId</span>     <span class="token operator">=</span> <span class="token function">para</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wxAppid'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$appSecret</span> <span class="token operator">=</span> <span class="token function">para</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'wxAppSecret'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$token</span> <span class="token operator">=</span> <span class="token function">json_decode</span><span class="token punctuation">(</span><span class="token function">file_get_contents</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;https://api.weixin.qq.com/sns/jscode2session?appid=<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$appId</span><span class="token punctuation">}</span></span>&amp;secret=<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$appSecret</span><span class="token punctuation">}</span></span>&amp;js_code=<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$code</span><span class="token punctuation">}</span></span>&amp;grant_type=authorization_code&quot;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$openid</span> <span class="token operator">=</span> <span class="token variable">$token</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'openid'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="sql语句"><a href="#sql语句" class="header-anchor">#</a> SQL语句</h2> <ul><li><p>sql语句拼接完整路径</p></li> <li><p>千万不要忘了把root左右的单引号加上</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$lunbo</span> <span class="token operator">=</span> <span class="token function">sqlQueryAll</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;select concat('&quot;</span><span class="token operator">.</span>root<span class="token operator">.</span><span class="token string double-quoted-string">&quot;',src) as src from img where type = 'h5轮播'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li>union all 多条SQL语句,可以在最后使用order by ,就会把多条查询出的结果排序,但是order by后面的字段.必须是在每条SQL select后面都出现过的字段</li></ul> <hr> <ul><li><p>现在卖车票,顾客可一次买多张,买多张的同时,其实生成个多个订单,但是这多个订单有相同的订单号.</p></li> <li><p>现在需要把这多个订单的出发到达具体地点,出发具体时间,上车地点,以及总价查询出来.</p></li> <li><p>同时还要给前端传递相同订单号的订单有几个,那么这种时候就需要在SQL语句中嵌套小的SQL语句.</p></li> <li><p>但是要注意,在想拼接一次查询的多个订单号相同的订单ID的时候,需要使用<code>GROUP_CONCAT</code>函数而不是<code>concat</code></p></li> <li><p>否则就会出现报错<code>#1242 - Subquery returns more than 1 row</code>,因为一次查一条,concat确是要拼接多条,数据行数就有问题</p></li></ul> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">select</span> j<span class="token punctuation">.</span><span class="token keyword">date</span><span class="token punctuation">,</span>j<span class="token punctuation">.</span>startTime<span class="token punctuation">,</span>j<span class="token punctuation">.</span>journeyTime<span class="token punctuation">,</span>b<span class="token punctuation">.</span>workFlow<span class="token punctuation">,</span> 
j<span class="token punctuation">.</span>oneType<span class="token punctuation">,</span>j<span class="token punctuation">.</span>originRegion<span class="token punctuation">,</span>j<span class="token punctuation">.</span>endRegion<span class="token punctuation">,</span>j<span class="token punctuation">.</span>originStation<span class="token punctuation">,</span>
j<span class="token punctuation">.</span>endStation<span class="token punctuation">,</span>s<span class="token punctuation">.</span>address<span class="token punctuation">,</span>b<span class="token punctuation">.</span>buyCarNum<span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">COUNT</span><span class="token punctuation">(</span>bu<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">FROM</span> buyCar <span class="token keyword">as</span> bu 
 <span class="token keyword">WHERE</span> bu<span class="token punctuation">.</span>buyCarNum <span class="token operator">=</span> b<span class="token punctuation">.</span>buyCarNum<span class="token punctuation">)</span> <span class="token keyword">as</span> num<span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> GROUP_CONCAT<span class="token punctuation">(</span>buy<span class="token punctuation">.</span>id<span class="token punctuation">)</span> <span class="token keyword">from</span> buyCar <span class="token keyword">as</span> buy 
 <span class="token keyword">where</span> buy<span class="token punctuation">.</span>buyCarNum <span class="token operator">=</span> b<span class="token punctuation">.</span>buyCarNum<span class="token punctuation">)</span> <span class="token keyword">as</span> ids<span class="token punctuation">,</span>
<span class="token punctuation">(</span><span class="token keyword">select</span> <span class="token function">sum</span><span class="token punctuation">(</span>buyc<span class="token punctuation">.</span>money<span class="token punctuation">)</span> <span class="token keyword">from</span> buyCar <span class="token keyword">as</span> buyc 
 <span class="token keyword">where</span> buyc<span class="token punctuation">.</span>buyCarNum <span class="token operator">=</span> b<span class="token punctuation">.</span>buyCarNum<span class="token punctuation">)</span> <span class="token keyword">as</span> money
            <span class="token keyword">from</span> buyCar <span class="token keyword">as</span> b 
            <span class="token keyword">left</span> <span class="token keyword">join</span> journey <span class="token keyword">as</span> j <span class="token keyword">on</span> b<span class="token punctuation">.</span>journeyId <span class="token operator">=</span> j<span class="token punctuation">.</span>id 
            <span class="token keyword">left</span> <span class="token keyword">join</span> baseLine <span class="token keyword">as</span> ba <span class="token keyword">on</span> j<span class="token punctuation">.</span>baseLineId <span class="token operator">=</span> ba<span class="token punctuation">.</span>id
            <span class="token keyword">left</span> <span class="token keyword">join</span> stationAndPrice <span class="token keyword">as</span> s <span class="token keyword">on</span> ba<span class="token punctuation">.</span>id <span class="token operator">=</span> s<span class="token punctuation">.</span>baseLineId <span class="token keyword">where</span> b<span class="token punctuation">.</span>khid <span class="token operator">=</span> <span class="token string">'{$post['</span>khid<span class="token string">']}'</span>
            <span class="token keyword">GROUP</span> <span class="token keyword">BY</span> b<span class="token punctuation">.</span>buyCarNum
</code></pre></div><hr> <ul><li><p>mysql IN查询将数组转换为字符串方法</p> <div class="language-php extra-class"><pre class="language-php"><code> <span class="token variable">$idStr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;'&quot;</span> <span class="token operator">.</span> <span class="token function">implode</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;','&quot;</span><span class="token punctuation">,</span> <span class="token variable">$post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'list'</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">.</span> <span class="token string double-quoted-string">&quot;'&quot;</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>选择日期,没有时分秒,SQL<strong>判断在当天</strong>的情况该怎么做.</p></li> <li><p>首先拿到应该的日期,时间选择器选择或者是今天</p></li> <li><p>然后<strong>拼接零点零分零秒.</strong></p></li> <li><p>然后使用date函数加一天</p></li> <li><p>最后在mysql中使用between即可.但是注意,<strong>日期要加引号</strong></p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$date</span> <span class="token operator">=</span> <span class="token variable">$post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'date'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot; 00:00:00&quot;</span><span class="token punctuation">;</span><span class="token comment">//选择的日期</span>
    <span class="token variable">$afterOneDay</span> <span class="token operator">=</span> <span class="token function">date</span><span class="token punctuation">(</span><span class="token string single-quoted-string">'Y-m-d H:i:s'</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;+1day&quot;</span><span class="token punctuation">,</span> <span class="token function">strtotime</span><span class="token punctuation">(</span><span class="token variable">$date</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//选择日期一天之后</span>
    <span class="token variable">$buyCarNum</span> <span class="token operator">=</span> <span class="token function">sqlNum</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;buyCar&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;roundId = '<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$rounds</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'roundId'</span><span class="token punctuation">]</span><span class="token punctuation">}</span></span>' and ( workFlow = '待消费' or workFlow = '退款中') and time between  '<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$date</span><span class="token punctuation">}</span></span>' and '<span class="token interpolation"><span class="token punctuation">{</span><span class="token variable">$afterOneDay</span><span class="token punctuation">}</span></span>'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="比较判断"><a href="#比较判断" class="header-anchor">#</a> 比较判断</h2> <ul><li>PHP中判断字符串==0时,得到的一直会为true,所以做判断时要小心,等于就用===,不等于用!==</li></ul> <h2 id="流程"><a href="#流程" class="header-anchor">#</a> 流程</h2> <ul><li>在一连串的if/else中,可能<strong>对于一个数据你进行过几次数据库更新</strong>,但是你在拿数据时,还用的是代码最顶端查到的那个变量例如<code>$kehu</code>中的数据,这样是错误的,因为你想进行一连串的数据改变,但是最顶端的那个变量从查出来就是定了的,不会因为你中途几次更新就也变化,一定要注意再次改变一个值时,<strong>重新查询</strong>数据库.</li></ul> <h2 id="数据回显"><a href="#数据回显" class="header-anchor">#</a> 数据回显</h2> <ul><li><p>时间如果为空,在详情页面会出现时间选择框初始选择0000-00-00或0100-01-01的情况,非常麻烦</p></li> <li><p>使用封装函数,三元运算符去解决这个问题比较合适.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">function</span> <span class="token function-definition function">emptyTime</span><span class="token punctuation">(</span><span class="token variable">$time</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token variable">$time</span><span class="token operator">==</span><span class="token string single-quoted-string">'0000-00-00'</span><span class="token operator">||</span><span class="token variable">$time</span><span class="token operator">==</span><span class="token string single-quoted-string">'0100-01-01'</span><span class="token operator">?</span><span class="token variable">$trueTime</span><span class="token operator">=</span><span class="token string single-quoted-string">''</span><span class="token punctuation">:</span><span class="token variable">$trueTime</span><span class="token operator">=</span><span class="token variable">$time</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$trueTime</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="正则表达式"><a href="#正则表达式" class="header-anchor">#</a> 正则表达式</h2> <p><strong>一、数字校验</strong></p> <p>数字：</p> <blockquote><p>^[0-9]*$</p></blockquote> <p>n位的数字：</p> <blockquote><p>^\d{n}$</p></blockquote> <p>至少n位的数字：</p> <blockquote><p>^\d{n,}$</p></blockquote> <p>m-n位的数字：</p> <blockquote><p>^\d{m,n}$</p></blockquote> <p>零和非零开头的数字：</p> <blockquote><p>^(0|[1-9][0-9]*)$</p></blockquote> <p>非零开头的最多带两位小数的数字：</p> <blockquote><p>^([1-9][0-9]*)+(.[0-9]{1,2})?$</p></blockquote> <p>带1-2位小数的正数或负数：</p> <blockquote><p>^(-)?\d+(.\d{1,2})?$</p></blockquote> <p>正数、负数、和小数：</p> <blockquote><p>^(-|+)?\d+(.\d+)?$</p></blockquote> <p>有两位小数的正实数：</p> <blockquote><p>^[0-9]+(.[0-9]{2})?$</p></blockquote> <p>有1~3位小数的正实数：</p> <blockquote><p>^[0-9]+(.[0-9]{1,3})?$</p></blockquote> <p>非零的正整数：</p> <blockquote><p>^[1-9]\d*$ 或 ^([1-9][0-9]<em>){1,3}$ 或 ^+?[1-9][0-9]</em>$</p></blockquote> <p>非零的负整数：</p> <blockquote><p>^-[1-9][]0-9″<em>$ 或 ^-[1-9]\d</em>$</p></blockquote> <p>非负整数：</p> <blockquote><p>^\d+$ 或 ^[1-9]\d*|0$</p></blockquote> <p>非正整数：</p> <blockquote><p>^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</p></blockquote> <p>非负浮点数：</p> <blockquote><p>^\d+(.\d+)?$ 或 ^[1-9]\d*.\d*|0.\d*[1-9]\d*|0?.0+|0$</p></blockquote> <p>非正浮点数：</p> <blockquote><p>^((-\d+(.\d+)?)|(0+(.0+)?))$ 或 ^(-([1-9]\d*.\d*|0.\d*[1-9]\d*))|0?.0+|0$</p></blockquote> <p>正浮点数：</p> <blockquote><p>^[1-9]\d*.\d*|0.\d*[1-9]\d*$ 或 ^(([0-9]+.[0-9]<em>[1-9][0-9]</em>)|([0-9]<em>[1-9][0-9]</em>.[0-9]+)|([0-9]<em>[1-9][0-9]</em>))$</p></blockquote> <p>负浮点数：</p> <blockquote><p>^-([1-9]\d*.\d*|0.\d*[1-9]\d*)$ 或 ^(-(([0-9]+.[0-9]<em>[1-9][0-9]</em>)|([0-9]<em>[1-9][0-9]</em>.[0-9]+)|([0-9]<em>[1-9][0-9]</em>)))$</p></blockquote> <p>浮点数：</p> <blockquote><p>^(-?\d+)(.\d+)?$ 或 ^-?([1-9]\d*.\d*|0.\d*[1-9]\d*|0?.0+|0)$</p></blockquote> <p><strong>二、字符校验</strong></p> <p>汉字：</p> <blockquote><p>^[\u4e00-\u9fa5]{0,}$</p></blockquote> <p>英文和数字：</p> <blockquote><p>^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$</p></blockquote> <p>长度为3-20的所有字符：</p> <blockquote><p>^.{3,20}$</p></blockquote> <p>由26个英文字母组成的字符串：</p> <blockquote><p>^[A-Za-z]+$</p></blockquote> <p>由26个大写英文字母组成的字符串：</p> <blockquote><p>^[A-Z]+$</p></blockquote> <p>由26个小写英文字母组成的字符串：</p> <blockquote><p>^[a-z]+$</p></blockquote> <p>由数字和26个英文字母组成的字符串：</p> <blockquote><p>^[A-Za-z0-9]+$</p></blockquote> <p>由数字、26个英文字母或者下划线组成的字符串：</p> <blockquote><p>^\w+$ 或 ^\w{3,20}$</p></blockquote> <p>中文、英文、数字包括下划线：</p> <blockquote><p>^[\u4E00-\u9FA5A-Za-z0-9_]+$</p></blockquote> <p>中文、英文、数字但不包括下划线等符号：</p> <blockquote><p>^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$</p></blockquote> <p>可以输入含有^%&amp;’,;=?$\”等字符：</p> <blockquote><p>[^%&amp;',;=?$\x22]+</p></blockquote> <p>禁止输入含有~的字符：</p> <blockquote><p>[^~\x22]+</p></blockquote> <p><strong>三、特殊需求处理</strong></p> <p>Email地址：</p> <blockquote><p>^\w+([-+.]\w+)<em>@\w+([-.]\w+)</em>.\w+([-.]\w+)*$</p></blockquote> <p>域名：</p> <blockquote><p>[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?</p></blockquote> <p>InternetURL：</p> <blockquote><p>[a-zA-z]+://[^\s]* 或 ^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]*)?$</p></blockquote> <p>手机号码：</p> <blockquote><p>^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$</p></blockquote> <p>电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：</p> <blockquote><p>^($$\d{3,4}-)|\d{3.4}-)?\d{7,8}$</p></blockquote> <p>国内电话号码(0511-4405222、021-87888822)：</p> <blockquote><p>\d{3}-\d{8}|\d{4}-\d{7}</p></blockquote> <p>身份证号(15位、18位数字)：</p> <blockquote><p>^\d{15}|\d{18}$</p></blockquote> <p>短身份证号码(数字、字母x结尾)：</p> <blockquote><p>^([0-9]){7,18}(x|X)?$ 或 ^\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$</p></blockquote> <p>帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：</p> <blockquote><p>^[a-zA-Z][a-zA-Z0-9_]{4,15}$</p></blockquote> <p>密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：</p> <blockquote><p>^[a-zA-Z]\w{5,17}$</p></blockquote> <p>强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：</p> <blockquote><p>^(?=.<em>\d)(?=.</em>[a-z])(?=.*[A-Z]).{8,10}$</p></blockquote> <p>日期格式：</p> <blockquote><p>^\d{4}-\d{1,2}-\d{1,2}</p></blockquote> <p>一年的12个月(01～09和1～12)：</p> <blockquote><p>^(0?[1-9]|1[0-2])$</p></blockquote> <p>一个月的31天(01～09和1～31)：</p> <blockquote><p>^((0?[1-9])|((1|2)[0-9])|30|31)$</p></blockquote> <p>钱的输入格式：</p> <p>有四种钱的表示形式我们可以接受:”10000.00″ 和 “10,000.00″, 和没有 “分” 的 “10000″ 和 “10,000″：</p> <blockquote><p>^[1-9][0-9]*$</p></blockquote> <p>这表示任意一个不以0开头的数字，但是，这也意味着一个字符”0″不通过，所以我们采用下面的形式：</p> <blockquote><p>^(0|[1-9][0-9]*)$</p></blockquote> <p>一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：</p> <blockquote><p>^(0|-?[1-9][0-9]*)$</p></blockquote> <p>这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉，因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：</p> <blockquote><p>^[0-9]+(.[0-9]+)?$</p></blockquote> <p>必须说明的是，小数点后面至少应该有1位数，所以”10.”是不通过的，但是 “10″ 和 “10.2″ 是通过的：</p> <blockquote><p>^[0-9]+(.[0-9]{2})?$</p></blockquote> <p>这样我们规定小数点后面必须有两位，如果你认为太苛刻了，可以这样：</p> <blockquote><p>^[0-9]+(.[0-9]{1,2})?$</p></blockquote> <p>这样就允许用户只写一位小数。下面我们该考虑数字中的逗号了，我们可以这样：</p> <blockquote><p>^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$</p></blockquote> <p>1到3个数字，后面跟着任意个 逗号+3个数字，逗号成为可选，而不是必须：</p> <blockquote><p>^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$</p></blockquote> <p>备注：这就是最终结果了，别忘了”+”可以用”*”替代。如果你觉得空字符串也可以接受的话(奇怪，为什么?)最后，别忘了在用函数时去掉去掉那个反斜杠，一般的错误都在这里</p> <p>xml文件：</p> <blockquote><p>^([a-zA-Z]+-?)+[a-zA-Z0-9]+\.[x|X][m|M][l|L]$</p></blockquote> <p>中文字符的正则表达式：</p> <blockquote><p>[\u4e00-\u9fa5]</p></blockquote> <p>双字节字符(包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))：</p> <blockquote><p>[^\x00-\xff]</p></blockquote> <p>空白行的正则表达式(可以用来删除空白行)：</p> <blockquote><p>\n\s*\r</p></blockquote> <p>HTML标记的正则表达式(网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力)：</p> <blockquote><p>&lt;(\S*?)[^&gt;]<em>&gt;.</em>?|&lt;.*? /&gt;</p></blockquote> <p>首尾空白字符的正则表达式(可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)：</p> <blockquote><p>^\s*|\s*$或(^\s*)|(\s*$)</p></blockquote> <p>腾讯QQ号(腾讯QQ号从10000开始)：</p> <blockquote><p>[1-9][0-9]{4,}</p></blockquote> <p>中国邮政编码(中国邮政编码为6位数字)：</p> <blockquote><p>[1-9]\d{5}(?!\d)</p></blockquote> <p>IP地址(提取IP地址时有用)：</p> <blockquote><p>\d+.\d+.\d+.\d+</p></blockquote> <p>IP地址：</p> <blockquote><p>((?😦?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))</p></blockquote> <h2 id="js"><a href="#js" class="header-anchor">#</a> JS</h2> <ul><li><p>jquery<strong>修改JS方法中的参数值</strong>该如何修改?</p></li> <li><p>首先通过节点拿到对应JS方法的标签,然后使用attr,直接把onclick属性完全改变.等于重写一遍标签上的方法字符.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//点击切换主题方法</span>
    <span class="token keyword">function</span> <span class="token function">changeTheme</span> <span class="token punctuation">(</span><span class="token parameter">node<span class="token punctuation">,</span>themeId</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//移除原选中按钮选中样式</span>
        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.choose'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeClass</span><span class="token punctuation">(</span><span class="token string">'choose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//给点击按钮添加选种样式</span>
        <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addClass</span><span class="token punctuation">(</span><span class="token string">'choose'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//异步返回主题相关信息部分</span>
        $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>root<span class="token operator">+</span><span class="token string">&quot;control/data.php?type=getRoom&quot;</span><span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">themeId</span><span class="token operator">:</span>themeId<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;.allRoom&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>allRoom<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//改变房间内容</span>
            <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;.price&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;¥&quot;</span><span class="token operator">+</span>data<span class="token punctuation">.</span>price<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//改变价格显示</span>
            <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;.palceButton&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">removeAttr</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'onclick'</span><span class="token punctuation">,</span><span class="token string">&quot;layer('placeAnOrder',{'themeId':'&quot;</span><span class="token operator">+</span>themeId<span class="token operator">+</span><span class="token string">&quot;'})&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//改变layer方法参数</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token string">&quot;json&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <ul><li><p>jquery<strong>获取相同类标签的所有值</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> btn <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'.btn'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//只能获得这个类标签的第一个值</span>
 
<span class="token comment">//获得一组值</span>
<span class="token keyword">var</span> btns <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Array</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;.btn&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    btns<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//  或者 btns[key] = $(value).val();</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <hr> <ul><li><p>jquery<strong>判断某标签存不存在</strong></p></li> <li><p>在jQuery中，<strong>jQuery对象永远都有返回值</strong>，所以$(&quot;someID&quot;) 总是TRUE ，IF语句没有起到任何判断作用。正确的写法应该是：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#someID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>length <span class="token operator">&gt;</span> <span class="token number">0</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span> 
   <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#someID&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">text</span><span class="token punctuation">(</span><span class="token string">&quot;hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span> 
</code></pre></div></li></ul> <hr> <ul><li>jquery的<code>$.inArray</code>方法,如果元素不在数组中返回-1,做判断的时候要用是否等于-1来判断才有用.</li></ul> <hr> <ul><li><p>JS中可能有拼接多个字符为一个字符串,每一个后面都跟逗号的情况</p></li> <li><p>这样的话最后一个后面也有逗号.不好看,所以用以下方法解决</p></li> <li><p>把字符串从第一个字符开始切割,到倒数第二个字符为止</p> <div class="language-js extra-class"><pre class="language-js"><code>repetitionArr <span class="token operator">=</span> repetitionArr<span class="token punctuation">.</span><span class="token function">substring</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>repetitionArr<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>jquery判断checkbox是否是选中状态的方法</p> <div class="language-js extra-class"><pre class="language-js"><code>方法一：
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">&quot;#checkbox-id&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span>checked<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>

方法二：
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#checkbox-id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token string">':checked'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
    <span class="token comment">//这个管用了,第三个失败了</span>
<span class="token punctuation">}</span>

方法三：
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#checkbox-id'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'checked'</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// do something</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <ul><li><p>js保留小数点后两位</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">parseFloat</span><span class="token punctuation">(</span>数字<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>jquery的foreach</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'td'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">&quot;.overtimeHidden&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">each</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
<span class="token punctuation">{</span>
totalMoney <span class="token operator">+=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'count'</span><span class="token punctuation">)</span><span class="token operator">*</span><span class="token number">1</span><span class="token operator">*</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'price'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>手动设置checkbox不选中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">prop</span><span class="token punctuation">(</span><span class="token string">'checked'</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>下拉选中的选项value</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'[name=discount]'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">children</span><span class="token punctuation">(</span><span class="token string">'option:selected'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <hr> <ul><li><p>js的几种数组<strong>遍历</strong>方法</p> <p><code>https://blog.csdn.net/function__/article/details/79555301</code></p></li></ul> <hr> <ul><li><p>jquery<strong>替换</strong>元素</p></li> <li><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">$</span><span class="token punctuation">(</span>content<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replaceWith</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="动态变动layer长度"><a href="#动态变动layer长度" class="header-anchor">#</a> 动态变动Layer长度</h3> <ul><li><p>动态添加layer中的元素比如选择框,长度会变动,很不好看</p></li> <li><p>使用jquery的htight同时改变两个元素的长度即可完美变动.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//拿到win和winAuto标签本身</span>
<span class="token keyword">let</span> win <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> winAuto <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//拿到win和winAuto标签的长度</span>
<span class="token keyword">let</span> heightWin <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> heightWinAuto <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span>node<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//使用height方法及时变动长度即可,亲测下拉列表长度为36,文本框为38</span>
win<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>heightWin<span class="token operator">*</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
winAuto<span class="token punctuation">.</span><span class="token function">height</span><span class="token punctuation">(</span>heightWinAuto<span class="token operator">*</span><span class="token number">1</span><span class="token operator">+</span><span class="token number">36</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h2 id="弹出层"><a href="#弹出层" class="header-anchor">#</a> 弹出层</h2> <h3 id="参数"><a href="#参数" class="header-anchor">#</a> 参数</h3> <ul><li><p>如果遇到layer方法,后面的参数是JSON,最好是单独写成数组,然后转成JSON再放到layer里.</p> <div class="language-php extra-class"><pre class="language-php"><code>	<span class="token variable">$layerArr</span> <span class="token operator">=</span> <span class="token punctuation">[</span>
						<span class="token string single-quoted-string">'themeId'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'themeId'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'category'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCarShop</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'money'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'money'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'khid'</span><span class="token operator">=&gt;</span><span class="token variable">$kehu</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'khid'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'userTel'</span><span class="token operator">=&gt;</span><span class="token variable">$kehu</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'userTel'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'themeName'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCarTheme</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'themeName'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'themeTime'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCarTheme</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'themeTime'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'themePrice'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCarTheme</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'price'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'roundId'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'roundId'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'presetTime'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'presetTime'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'number'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'number'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'vip'</span><span class="token operator">=&gt;</span><span class="token variable">$svip</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'crowd'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'crowd'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'source'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'source'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'isFree'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'isFree'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'isPack'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'isPack'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'coupon'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'couponUse'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'overtime'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'overtime'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'discountType'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'discountType'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'discountNum'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'discountNum'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'freeText'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'freeText'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'payType'</span><span class="token operator">=&gt;</span><span class="token variable">$payType</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'staffCount'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'staffCount'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
						<span class="token string single-quoted-string">'consumeCount'</span><span class="token operator">=&gt;</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'consumeCount'</span><span class="token punctuation">]</span>
		<span class="token punctuation">]</span><span class="token punctuation">;</span>
		<span class="token variable">$layerArr</span> <span class="token operator">=</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$layerArr</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		
</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$layer</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;span class='placeButton btn cyan mini' onclick='layer(\&quot;placeAnOrder\&quot;,<span class="token interpolation"><span class="token variable">$layerArr</span></span>)'&gt;处理下单&lt;/span&gt;&amp;nbsp;
		&lt;script&gt;
		$(function() {
			//要执行的js代码段
			console.log('下单按钮节点');
			console.log($('.placeButton'));
			$('.placeButton').click();
		});
		&lt;/script&gt;&quot;</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>如果layer方法里的json参数中还有JSON.记得要转义之后再放进数组.</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$payType</span> <span class="token operator">=</span> <span class="token function">addslashes</span><span class="token punctuation">(</span><span class="token variable">$buyCar</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'payType'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
		<span class="token variable">$payType</span> <span class="token operator">=</span> <span class="token function">str_replace</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot; &quot;</span><span class="token punctuation">,</span><span class="token string single-quoted-string">''</span><span class="token punctuation">,</span><span class="token variable">$payType</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>并且layer方法要用单引号包裹,然后第一个参数也就是弹窗名用转义双引号包裹.</p></li></ul> <h2 id="html5"><a href="#html5" class="header-anchor">#</a> HTML5</h2> <h3 id="模糊查询输入框"><a href="#模糊查询输入框" class="header-anchor">#</a> 模糊查询输入框</h3> <ul><li><p>模糊查询的文本输入框</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>input type<span class="token operator">=</span>\<span class="token string">&quot;text\&quot; value=\&quot;&quot;</span><span class="token punctuation">.</span>$info<span class="token punctuation">[</span><span class="token string">'unit'</span><span class="token punctuation">]</span><span class="token punctuation">.</span>&quot;\&quot; name<span class="token operator">=</span>\&quot;unit\&quot; placeholder<span class="token operator">=</span>\&quot;客户单位\&quot; <span class="token keyword">class</span><span class="token operator">=</span>\&quot;form<span class="token operator">-</span>control\&quot; id<span class="token operator">=</span>\&quot;batch\&quot;  list<span class="token operator">=</span>\&quot;batch_list\&quot; autocomplete<span class="token operator">=</span>\&quot;off\&quot;<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 选择内容 <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>datalist id<span class="token operator">=</span>\&quot;batch_list\&quot;<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>datalist<span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 动态加载选择的内容 <span class="token operator">--</span><span class="token operator">&gt;</span>
                    <span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
                        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'input#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token string">'keyup'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">var</span> batch <span class="token operator">=</span> <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'input#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span>batch<span class="token operator">!=</span><span class="token string">''</span><span class="token operator">&amp;&amp;</span>batch<span class="token operator">!=</span><span class="token keyword">undefined</span><span class="token operator">&amp;&amp;</span>batch<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                              $<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                               <span class="token literal-property property">url</span><span class="token operator">:</span> \<span class="token string">&quot;&quot;</span><span class="token punctuation">.</span>root<span class="token punctuation">.</span>&quot;control<span class="token operator">/</span>adIndex<span class="token punctuation">.</span>php<span class="token operator">?</span>cla<span class="token operator">=</span>contract<span class="token operator">&amp;</span>fun<span class="token operator">=</span>getUnit\&quot;<span class="token punctuation">,</span>
                                <span class="token literal-property property">type</span><span class="token operator">:</span> \&quot;<span class="token constant">POST</span>\&quot;<span class="token punctuation">,</span>
                                <span class="token literal-property property">dataType</span><span class="token operator">:</span> <span class="token string">'json'</span><span class="token punctuation">,</span>
                                <span class="token literal-property property">data</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token string-property property">'batch'</span><span class="token operator">:</span> batch<span class="token punctuation">}</span><span class="token punctuation">,</span>
                                <span class="token literal-property property">async</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                                <span class="token function-variable function">success</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">arg</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'datalist#batch_list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    
                                    <span class="token keyword">if</span><span class="token punctuation">(</span>arg<span class="token operator">!=</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arg<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                                        <span class="token comment">//这里的.expressNum就是传递到前端的数组的键</span>
                                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'下拉客户ID'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arg<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>khid<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                        <span class="token keyword">var</span> add_options <span class="token operator">=</span> <span class="token string">'&lt;option value=\&quot;'</span> <span class="token operator">+</span> arg<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>khid <span class="token operator">+</span> <span class="token string">'\&quot;&gt;'</span><span class="token operator">+</span> arg<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>unit <span class="token operator">+</span> <span class="token string">'&lt;/option&gt;'</span><span class="token punctuation">;</span>
                                         <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'datalist#batch_list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>add_options<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                    <span class="token punctuation">}</span>
                                  <span class="token punctuation">}</span>
                                    
                               <span class="token punctuation">}</span>
                             <span class="token punctuation">}</span><span class="token punctuation">)</span>  
                            <span class="token punctuation">}</span>
                           
                         <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                        <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">change</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token string">''</span><span class="token operator">&amp;&amp;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">undefined</span><span class="token operator">&amp;&amp;</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'隐藏标签'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#khid'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'选中的单位的客户ID'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                                
                                <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#khid'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">'value'</span><span class="token punctuation">,</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                            $<span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span>root<span class="token operator">+</span>\&quot;control<span class="token operator">/</span>adIndex<span class="token punctuation">.</span>php<span class="token operator">?</span>cla<span class="token operator">=</span>contract<span class="token operator">&amp;</span>fun<span class="token operator">=</span>getUnitString\&quot;<span class="token punctuation">,</span><span class="token punctuation">{</span><span class="token literal-property property">khid</span><span class="token operator">:</span><span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                <span class="token keyword">if</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>unit<span class="token operator">!=</span><span class="token string">''</span><span class="token operator">&amp;&amp;</span>data<span class="token punctuation">.</span>unit<span class="token operator">!=</span><span class="token keyword">undefined</span><span class="token operator">&amp;&amp;</span>data<span class="token punctuation">.</span>unit<span class="token operator">!=</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                                    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#batch'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">val</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>unit<span class="token punctuation">)</span><span class="token punctuation">;</span>
                                <span class="token punctuation">}</span>
                            <span class="token punctuation">}</span><span class="token punctuation">,</span>\&quot;json\&quot;<span class="token punctuation">)</span>
                            <span class="token punctuation">}</span>
                            
                        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre></div><div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">//上面js中异步模糊查询获取数据的函数</span>
<span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getExpress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token variable">$checkReport</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">sqlQueryAll</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;select expressNum from checkReport where '&quot;</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'batch'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;%'&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token function">json_encode</span><span class="token punctuation">(</span><span class="token variable">$checkReport</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="单选"><a href="#单选" class="header-anchor">#</a> 单选</h3> <ul><li><p>有时候你的一些字段使用0,1表示不同的状态,这时如果想使用单选,选择之后实际上传递的是字符串</p></li> <li><p>如果想显示字符串,传递0和1,就得这样打乱选项的键的顺序即可.</p></li> <li><p>但是这样会有个问题,不选中就是false就是0,会默认选中键为0的选项</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token function">radio</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;isEnsure&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span><span class="token operator">=&gt;</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">'已确认'</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token operator">=&gt;</span><span class="token string single-quoted-string">'未确认'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">'title'</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">'本人是否确认'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div></li></ul> <h3 id="h5输入框校检"><a href="#h5输入框校检" class="header-anchor">#</a> H5输入框校检</h3> <ul><li><p>可以自定义input type属性的方法</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token comment">/**********生成单行文本框********************************************************
    $data = array(
    &quot;name&quot; =&gt; &quot;文本框name&quot;,
    &quot;id&quot; =&gt; &quot;文本框id&quot;,
    &quot;laydate&quot; =&gt; array()//&quot;调用laydate日历框架，数组内可以放一些额外参数&quot;,
    &quot;title&quot; =&gt; &quot;文本框标题&quot;,
    &quot;value&quot; =&gt; &quot;文本框value&quot;,
    &quot;class&quot; =&gt; &quot;文本框的class&quot;,
    &quot;click&quot; =&gt; &quot;鼠标点击事件函数名&quot;,
    &quot;blur&quot; =&gt; &quot;元素失去焦点事件函数名&quot;,
    &quot;keyup&quot; =&gt; &quot;某个键盘按键被松开时的函数名&quot;,
    &quot;other&quot; =&gt; &quot;串联其他属性&quot;,
    );
     */</span>
<span class="token keyword">function</span> <span class="token function-definition function">textType</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token variable">$attribute</span> <span class="token operator">=</span> <span class="token variable">$js</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; id='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">elseif</span><span class="token punctuation">(</span><span class="token function">array_key_exists</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;laydate&quot;</span><span class="token punctuation">,</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//如果存在laydate键名</span>
        <span class="token variable">$id</span> <span class="token operator">=</span> <span class="token function">suiji</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; id='&quot;</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
        <span class="token variable">$json</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token keyword type-casting">array</span><span class="token punctuation">)</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'laydate'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$json</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;,&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;:'&quot;</span><span class="token operator">.</span><span class="token variable">$value</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;'&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$js</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;script&gt;$(function(){laydate.render({elem:'#&quot;</span><span class="token operator">.</span><span class="token variable">$id</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;'&quot;</span><span class="token operator">.</span><span class="token variable">$json</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;});});&lt;/script&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;  placeholder='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' title='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'title'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'value'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; value='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'value'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'class'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; class='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'class'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'click'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; onclick='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'click'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;(this)' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'blur'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; onblur='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'blur'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;(this)' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'keyup'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; onkeyup='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'keyup'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;(this)' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//规定input的正则表达式</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pattern'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$attribute</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot; pattern='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'pattern'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' &quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//规定input的type属性</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$type</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'type'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token variable">$type</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;type&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$html</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;input type='<span class="token interpolation"><span class="token variable">$type</span></span>' name='&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'name'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' autocomplete='off' &quot;</span><span class="token operator">.</span><span class="token variable">$attribute</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'other'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$js</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;\n&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$html</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <ul><li><p>不会影响html5中input标签的required属性的layer生成</p></li> <li><p>因为这个属性必须是表单submit时才可以,而之前的方法表单onsubmit是return false,</p></li> <li><p>现在把提交按钮设置type=submit,然后把原先绑定在提交按钮上的JS提交方法放到form标签的onsubmit处</p></li> <li><p>注意这里的form的action属性一定要写为javascript:void(0),不然就不会正常异步提交</p> <div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">layerEditTest</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token comment">//表单名称</span>
    <span class="token variable">$form</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cla'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token function">ucwords</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fun'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;Form&quot;</span><span class="token punctuation">;</span>
    <span class="token comment">//拼接隐藏域</span>
    <span class="token variable">$hidden</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$hidden</span> <span class="token operator">.=</span> <span class="token function">hidden</span><span class="token punctuation">(</span><span class="token keyword">array</span><span class="token punctuation">(</span><span class="token string double-quoted-string">&quot;name&quot;</span> <span class="token operator">=&gt;</span> <span class="token string double-quoted-string">&quot;id&quot;</span><span class="token punctuation">,</span><span class="token string double-quoted-string">&quot;value&quot;</span> <span class="token operator">=&gt;</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">post</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'id'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//弹出层表单主索引</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hidden'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$hidden</span> <span class="token operator">.=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'hidden'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//生成提交按钮</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'formTwo'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$subForm</span> <span class="token operator">=</span> <span class="token variable">$form</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token variable">$subForm</span> <span class="token operator">=</span> <span class="token variable">$form</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;,&quot;</span><span class="token operator">.</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'formTwo'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$url</span> <span class="token operator">=</span> root<span class="token operator">.</span><span class="token string double-quoted-string">&quot;control/adIndex.php?cla=&quot;</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'cla'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&amp;fun=&quot;</span><span class="token operator">.</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">get</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'fun'</span><span class="token punctuation">]</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;Edit&quot;</span><span class="token punctuation">;</span>
        <span class="token comment">//这里的提交按钮全都改成type=submit的简单提交按钮</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token keyword">empty</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'upload'</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$js</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;upForm('&quot;</span><span class="token operator">.</span><span class="token variable">$subForm</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;','&quot;</span><span class="token operator">.</span><span class="token variable">$url</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;')&quot;</span><span class="token punctuation">;</span>
            <span class="token comment">//这里就是上传图片的新增详情页面自定义js方法的提交按钮</span>
            <span class="token variable">$button</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;input  type='submit' class='button' value='确认提交'&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token variable">$js</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;subForm('&quot;</span><span class="token operator">.</span><span class="token variable">$subForm</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;','&quot;</span><span class="token operator">.</span><span class="token variable">$url</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;')&quot;</span><span class="token punctuation">;</span>
            <span class="token variable">$button</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&lt;input  type='submit' class='button' value='确认提交'&gt;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>


    <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
        <span class="token variable">$button</span> <span class="token operator">=</span> <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'button'</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'table'</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token variable">$hidden</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$button</span><span class="token punctuation">;</span>
    <span class="token comment">//生成table</span>
    <span class="token variable">$tr</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">foreach</span><span class="token punctuation">(</span><span class="token variable">$data</span><span class="token punctuation">[</span><span class="token string single-quoted-string">'table'</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token variable">$key</span> <span class="token operator">=&gt;</span> <span class="token variable">$value</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token function">is_int</span><span class="token punctuation">(</span><span class="token variable">$key</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token variable">$key</span> <span class="token operator">=</span> <span class="token string double-quoted-string">&quot;&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token variable">$tr</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;&lt;tr&gt;&lt;td&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$key</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/td&gt;&lt;td&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$value</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/td&gt;&lt;/tr&gt;&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">//注意这里的form的action属性一定要写为javascript:void(0),不然就不会正常异步提交</span>
    <span class="token comment">//把原本绑定在提交按钮上的js提交方法放在这里的onsubmit</span>
    <span class="token variable">$html</span> <span class="token operator">.=</span> <span class="token string double-quoted-string">&quot;
		&lt;form name='&quot;</span><span class="token operator">.</span><span class="token variable">$form</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;' onsubmit=\&quot;<span class="token interpolation"><span class="token variable">$js</span></span>\&quot;  action=\&quot;javascript:void(0)\&quot;&gt;
		    &lt;style&gt;table img{width: 130px!important;height: 130px!important;}&lt;/style&gt;
			&lt;table class='tableRight'&gt;&quot;</span><span class="token operator">.</span><span class="token variable">$tr</span><span class="token operator">.</span><span class="token string double-quoted-string">&quot;&lt;/table&gt;
		&lt;/form&gt;
		&quot;</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> <span class="token variable">$html</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <hr> <h2 id="office"><a href="#office" class="header-anchor">#</a> OFFICE</h2> <ul><li><p><strong>php在线预览office文件</strong></p></li> <li><p>这个还是推荐你直接使用微软官方提供的解析服务吧，挺方便的，效果不错。</p> <p>使用也超级简单，直接引用office文件绝对地址就可以。像这样：</p> <p><code>https://view.officeapps.live.com/op/view.aspx?src=http://www.a.com/test.doc</code></p> <p>其中<code>http://www.a.com/test.doc</code>这个就是文档的绝对地址，直接iframe调用一下拼接好的地址，就可以看到效果了，试试吧</p> <p>备注： office系列全家所有文件都可以预览的，文档，表格，ppt都没问题</p></li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/27/2020, 10:06:51 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/yumu/公司框架/2020开年新框架.html" class="prev">
        2020框架
      </a></span> <span class="next"><a href="/yumu/公司框架/js相关.html">
        js相关
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.6ef7aeda.js" defer></script><script src="/assets/js/2.716a1f37.js" defer></script><script src="/assets/js/90.e91320ce.js" defer></script>
  </body>
</html>
